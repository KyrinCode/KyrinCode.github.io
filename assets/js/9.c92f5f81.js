(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{460:function(s,t,a){s.exports=a.p+"assets/img/fiscobcosbenchmark1.a338e213.png"},461:function(s,t,a){s.exports=a.p+"assets/img/fiscobcosbenchmark2.4cd38c0d.png"},462:function(s,t,a){s.exports=a.p+"assets/img/fiscobcosbenchmark3.3064784b.png"},463:function(s,t,a){s.exports=a.p+"assets/img/fiscobcosbenchmark4.1418ad06.png"},464:function(s,t,a){s.exports=a.p+"assets/img/fiscobcosbenchmark5.f301b5ce.png"},642:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("通过 Python SDK 跑 FISCO BCOS 示范应用流程")]),s._v(" "),n("p",[s._v("参考 "),n("a",{attrs:{href:"https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/caliper.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/caliper.html"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://github.com/FISCO-BCOS/FISCO-BCOS/issues/1248",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/FISCO-BCOS/FISCO-BCOS/issues/1248"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("搭建过程放在")]),s._v(" "),n("h2",{attrs:{id:"环境准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[s._v("#")]),s._v(" 环境准备")]),s._v(" "),n("p",[s._v("依赖 NodeJS、Docker、Docker Compose")]),s._v(" "),n("p",[s._v("建立工作目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" benchmarks "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" benchmarks\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("npm 项目初始化")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在工作目录下创建 package.json 文件方便后续依赖安装")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("安装 callper-cli")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --only=prod 选项用于指定 NPM 只安装 Caliper 的核心组件，而不安装其他的依赖项（如各个区块链平台针对 Caliper 的适配器）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --only"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prod @hyperledger/caliper-cli@0.2.0\nnpx caliper --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("绑定")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Caliper 采用了轻量级的部署方式，因此需要显式的绑定步骤指定要测试的平台及适配器版本，caliper-cli 会自动进行相应依赖项的安装。使用 npx caliper bind 命令进行绑定")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npx caliper bind --help # 命令查看")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对于FISCO BCOS，可以采用如下方式进行绑定")]),s._v("\nnpx caliper "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" --caliper-bind-sut fisco-bcos --caliper-bind-sdk latest\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("在源码中修改 Caliper 0.2.0 版本 bug")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://github.com/hyperledger/caliper/pull/677/files",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/hyperledger/caliper/pull/677/files"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("code",[s._v("benchmarks/node_modules/@hyperledger/caliper-fisco-bcos/lib/fiscoBcos.js")]),s._v(" 文件中")]),s._v(" "),n("p",[n("img",{attrs:{src:a(460),alt:"fiscobcosbenchmark1"}})]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 41行-46行 增加")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("authentication"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" k "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("authentication"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("authentication"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" CaliperUtils"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolvePath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("authentication"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" workspace_root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 63行 修改")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" fiscoBcosSettings "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fiscoBcosSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("a",{attrs:{href:"https://github.com/hyperledger/caliper/pull/647/files",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/hyperledger/caliper/pull/647/files"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("code",[s._v("benchmarks/node_modules/@hyperledger/caliper-fisco-bcos/lib/channelPromise.js")]),s._v(" 文件中")]),s._v(" "),n("p",[n("img",{attrs:{src:a(461),alt:"fiscobcosbenchmark2"}})]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 49行-54行 修改与增加")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" emitter "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" emitters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("seq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("emitter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Stale message receieved")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    emitter "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" emitter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("emitter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[n("code",[s._v("benchmarks/node_modules/@hyperledger/caliper-fisco-bcos/lib/fiscoBcos.js")]),s._v(" 文件中")]),s._v(" "),n("p",[n("img",{attrs:{src:a(462),alt:"fiscobcosbenchmark3"}})]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 25行 修改")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Color "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./common'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("code",[s._v("benchmarks/node_modules/@hyperledger/caliper-fisco-bcos/lib/web3lib/web3sync.js")]),s._v(" 文件中")]),s._v(" "),n("p",[n("img",{attrs:{src:a(463),alt:"fiscobcosbenchmark4"}})]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 27行 修改")]),s._v("\n    uuid "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" uuid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/-/g")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 91行 修改")]),s._v("\n        extraData"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 118行 修改")]),s._v("\n        extraData"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[n("a",{attrs:{href:"https://github.com/FISCO-BCOS/FISCO-BCOS/issues/1721",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/FISCO-BCOS/FISCO-BCOS/issues/1721"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("img",{attrs:{src:a(464),alt:"fiscobcosbenchmark5"}})]),s._v(" "),n("p",[n("code",[s._v("benchmarks/node_modules/@hyperledger/caliper-fisco-bcos/package.json")]),s._v(" 文件中在 "),n("code",[s._v('"dependencies"')]),s._v(" 中添加一项 "),n("code",[s._v('"secp256k1": "^3.8.0"')]),s._v("，并在该目录下执行")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"体验官方提供的基准测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#体验官方提供的基准测试"}},[s._v("#")]),s._v(" 体验官方提供的基准测试")]),s._v(" "),n("p",[s._v("在 "),n("code",[s._v("benchmarks")]),s._v(" 目录下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/vita-dounai/caliper-benchmarks.git\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 HelloWorld 合约测试")]),s._v("\nnpx caliper benchmark run --caliper-workspace caliper-benchmarks --caliper-benchconfig benchmarks/samples/fisco-bcos/helloworld/config.yaml  --caliper-networkconfig networks/fisco-bcos/4nodes1group/fisco-bcos.json\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 Solidity 版转账合约测试")]),s._v("\nnpx caliper benchmark run --caliper-workspace caliper-benchmarks --caliper-benchconfig benchmarks/samples/fisco-bcos/transfer/solidity/config.yaml  --caliper-networkconfig networks/fisco-bcos/4nodes1group/fisco-bcos.json\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行预编译版转账合约测试")]),s._v("\nnpx caliper benchmark run --caliper-workspace caliper-benchmarks --caliper-benchconfig benchmarks/samples/fisco-bcos/transfer/precompiled/config.yaml  --caliper-networkconfig networks/fisco-bcos/4nodes1group/fisco-bcos.json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);