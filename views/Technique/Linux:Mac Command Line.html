<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux/Mac Command Line | KyrinCode</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <meta name="description" content="Valar Morghulis, Valar Dohaeris.">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.ab2f6801.css" as="style"><link rel="preload" href="/assets/js/app.8f1aa5f8.js" as="script"><link rel="preload" href="/assets/js/4.20fd5242.js" as="script"><link rel="preload" href="/assets/js/1.d8e0899a.js" as="script"><link rel="preload" href="/assets/js/35.ec5cfdd7.js" as="script"><link rel="prefetch" href="/assets/js/10.7f708979.js"><link rel="prefetch" href="/assets/js/11.9c0a0c42.js"><link rel="prefetch" href="/assets/js/12.bf061ffc.js"><link rel="prefetch" href="/assets/js/13.16196cc8.js"><link rel="prefetch" href="/assets/js/14.6f8ddccb.js"><link rel="prefetch" href="/assets/js/15.789a4cf3.js"><link rel="prefetch" href="/assets/js/16.c56d1f74.js"><link rel="prefetch" href="/assets/js/17.ef7f19c4.js"><link rel="prefetch" href="/assets/js/18.1ab6ee16.js"><link rel="prefetch" href="/assets/js/19.c6d1f252.js"><link rel="prefetch" href="/assets/js/20.242455f2.js"><link rel="prefetch" href="/assets/js/21.d1dc306d.js"><link rel="prefetch" href="/assets/js/22.9e5a2dc3.js"><link rel="prefetch" href="/assets/js/23.1b5826b6.js"><link rel="prefetch" href="/assets/js/24.8c15474e.js"><link rel="prefetch" href="/assets/js/25.b6fa6cff.js"><link rel="prefetch" href="/assets/js/26.3f68fa1a.js"><link rel="prefetch" href="/assets/js/27.76486f01.js"><link rel="prefetch" href="/assets/js/28.42f28870.js"><link rel="prefetch" href="/assets/js/29.14855a20.js"><link rel="prefetch" href="/assets/js/3.69d01a81.js"><link rel="prefetch" href="/assets/js/30.e235be2e.js"><link rel="prefetch" href="/assets/js/31.d946ac4c.js"><link rel="prefetch" href="/assets/js/32.0fefa1b6.js"><link rel="prefetch" href="/assets/js/33.24d47935.js"><link rel="prefetch" href="/assets/js/34.455318cb.js"><link rel="prefetch" href="/assets/js/36.3dcfe7a9.js"><link rel="prefetch" href="/assets/js/37.0482f5c1.js"><link rel="prefetch" href="/assets/js/38.a8475f91.js"><link rel="prefetch" href="/assets/js/39.9179c38a.js"><link rel="prefetch" href="/assets/js/40.2b327385.js"><link rel="prefetch" href="/assets/js/41.6a4dcfa0.js"><link rel="prefetch" href="/assets/js/42.7e9dbe20.js"><link rel="prefetch" href="/assets/js/43.89ce3ae8.js"><link rel="prefetch" href="/assets/js/44.47bd4388.js"><link rel="prefetch" href="/assets/js/45.fcc5d813.js"><link rel="prefetch" href="/assets/js/46.084b0814.js"><link rel="prefetch" href="/assets/js/47.35a27d6a.js"><link rel="prefetch" href="/assets/js/48.abaf7049.js"><link rel="prefetch" href="/assets/js/49.4e7b37a4.js"><link rel="prefetch" href="/assets/js/5.997668a1.js"><link rel="prefetch" href="/assets/js/50.a2f6ad52.js"><link rel="prefetch" href="/assets/js/51.bc33cf4c.js"><link rel="prefetch" href="/assets/js/52.93d4f244.js"><link rel="prefetch" href="/assets/js/53.f66573eb.js"><link rel="prefetch" href="/assets/js/54.1e0cd753.js"><link rel="prefetch" href="/assets/js/55.6bb86fba.js"><link rel="prefetch" href="/assets/js/56.dc6cd837.js"><link rel="prefetch" href="/assets/js/6.912c1fe8.js"><link rel="prefetch" href="/assets/js/7.ca71cf1d.js"><link rel="prefetch" href="/assets/js/8.2c990301.js"><link rel="prefetch" href="/assets/js/9.13968567.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ab2f6801.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>KyrinCode</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Kyrin</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="KyrinCode" class="logo"> <span class="site-name">KyrinCode</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="iconfont undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/Blockchain/" class="nav-link"><i class="iconfont undefined"></i>
  Blockchain
</a></li><li class="dropdown-item"><!----> <a href="/categories/Language/" class="nav-link"><i class="iconfont undefined"></i>
  Language
</a></li><li class="dropdown-item"><!----> <a href="/categories/Paper/" class="nav-link"><i class="iconfont undefined"></i>
  Paper
</a></li><li class="dropdown-item"><!----> <a href="/categories/Technique/" class="nav-link"><i class="iconfont undefined"></i>
  Technique
</a></li><li class="dropdown-item"><!----> <a href="/categories/Travel/" class="nav-link"><i class="iconfont undefined"></i>
  Travel
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/KyrinCode" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/Technique/.html#" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li><li class="dropdown-item"><!----> <a href="/views/Technique/.html#" class="nav-link"><i class="iconfont reco-mail"></i>
  Email
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-b038cec6><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-b038cec6> <h3 class="name" data-v-b038cec6>
    Kyrin
  </h3> <div class="num" data-v-b038cec6><div data-v-b038cec6><h3 data-v-b038cec6>38</h3> <h6 data-v-b038cec6>Article</h6></div> <div data-v-b038cec6><h3 data-v-b038cec6>34</h3> <h6 data-v-b038cec6>Tag</h6></div></div> <hr data-v-b038cec6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="iconfont undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/Blockchain/" class="nav-link"><i class="iconfont undefined"></i>
  Blockchain
</a></li><li class="dropdown-item"><!----> <a href="/categories/Language/" class="nav-link"><i class="iconfont undefined"></i>
  Language
</a></li><li class="dropdown-item"><!----> <a href="/categories/Paper/" class="nav-link"><i class="iconfont undefined"></i>
  Paper
</a></li><li class="dropdown-item"><!----> <a href="/categories/Technique/" class="nav-link"><i class="iconfont undefined"></i>
  Technique
</a></li><li class="dropdown-item"><!----> <a href="/categories/Travel/" class="nav-link"><i class="iconfont undefined"></i>
  Travel
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/KyrinCode" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/Technique/.html#" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li><li class="dropdown-item"><!----> <a href="/views/Technique/.html#" class="nav-link"><i class="iconfont reco-mail"></i>
  Email
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux/Mac Command Line</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/Technique/Linux:Mac%20Command%20Line.html#part-one-学习-shell" class="sidebar-link">Part one 学习 shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-1-shell是什么" class="sidebar-link">Chapter 1 shell是什么</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-2-导航" class="sidebar-link">Chapter 2 导航</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-3-linux系统" class="sidebar-link">Chapter 3 Linux系统</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-4-操作文件与目录" class="sidebar-link">Chapter 4 操作文件与目录</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-5-命令的使用" class="sidebar-link">Chapter 5 命令的使用</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-6-重定向" class="sidebar-link">Chapter 6 重定向</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-7-透过shell看世界" class="sidebar-link">Chapter 7 透过shell看世界</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-8-高级键盘技巧" class="sidebar-link">Chapter 8 高级键盘技巧</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-9-权限" class="sidebar-link">Chapter 9 权限</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-10-进程" class="sidebar-link">Chapter 10 进程</a></li></ul></li><li><a href="/views/Technique/Linux:Mac%20Command%20Line.html#part-two-配置与环境" class="sidebar-link">Part two 配置与环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-11-环境" class="sidebar-link">Chapter 11 环境</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-12-vi简介" class="sidebar-link">Chapter 12 VI简介</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-13-定制提示符" class="sidebar-link">Chapter 13 定制提示符</a></li></ul></li><li><a href="/views/Technique/Linux:Mac%20Command%20Line.html#part-three-常见任务和主要工具" class="sidebar-link">Part three 常见任务和主要工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-14-软件包管理" class="sidebar-link">Chapter 14 软件包管理</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-15-存储介质" class="sidebar-link">Chapter 15  存储介质</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-16-网络" class="sidebar-link">Chapter 16 网络</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-17-文件搜索" class="sidebar-link">Chapter 17 文件搜索</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-18-归档和备份" class="sidebar-link">Chapter 18 归档和备份</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-19-正则表达式" class="sidebar-link">Chapter 19 正则表达式</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-20-文本处理" class="sidebar-link">Chapter 20 文本处理</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-23-编译程序" class="sidebar-link">Chapter 23 编译程序</a></li></ul></li><li><a href="/views/Technique/Linux:Mac%20Command%20Line.html#part-four-编写-shell-脚本" class="sidebar-link">Part four 编写 shell 脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-24-编写第一个-shell-脚本" class="sidebar-link">Chapter 24 编写第一个 shell 脚本</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-25-启动一个项目" class="sidebar-link">Chapter 25 启动一个项目</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-26-自顶向下设计" class="sidebar-link">Chapter 26 自顶向下设计</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-27-流控制：if-分支语句" class="sidebar-link">Chapter 27 流控制：IF 分支语句</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-28-读取键盘输入" class="sidebar-link">Chapter 28 读取键盘输入</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-29-流控制：while-和-until-循环" class="sidebar-link">Chapter 29 流控制：WHILE 和 UNTIL 循环</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-30-故障诊断" class="sidebar-link">Chapter 30 故障诊断</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-31-流控制：case-分支" class="sidebar-link">Chapter 31 流控制：case 分支</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-32-位置参数" class="sidebar-link">Chapter 32 位置参数</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-33-流控制：for-循环" class="sidebar-link">Chapter 33 流控制：for 循环</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-34-字符串和数字" class="sidebar-link">Chapter 34 字符串和数字</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-35-数组" class="sidebar-link">Chapter 35 数组</a></li><li class="sidebar-sub-header"><a href="/views/Technique/Linux:Mac%20Command%20Line.html#chapter-36-其他命令" class="sidebar-link">Chapter 36 其他命令</a></li></ul></li><li><a href="/views/Technique/Linux:Mac%20Command%20Line.html#complement" class="sidebar-link">Complement</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Linux/Mac Command Line</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Kyrin</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>Linux/Mac Command Line</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>Kyrin</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2020-04-29</span></i> <i class="iconfont reco-eye" data-v-484a899e><span id="/views/Technique/Linux:Mac%20Command%20Line.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-484a899e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      linux
    </span><span class="tag-item" data-v-484a899e>
      mac
    </span><span class="tag-item" data-v-484a899e>
      shell
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>总结 Linux/Mac 下 shell 脚本</p> <h2 id="part-one-学习-shell"><a href="#part-one-学习-shell" class="header-anchor">#</a> Part one 学习 shell</h2> <h3 id="chapter-1-shell是什么"><a href="#chapter-1-shell是什么" class="header-anchor">#</a> Chapter 1 shell是什么</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">date</span>
<span class="token function">cal</span>
<span class="token function">df</span> -h
<span class="token function">free</span> <span class="token comment">#Linux</span>
vm_stat <span class="token comment">#Mac</span>
<span class="token builtin class-name">exit</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="chapter-2-导航"><a href="#chapter-2-导航" class="header-anchor">#</a> Chapter 2 导航</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">pwd</span>
<span class="token builtin class-name">cd</span>
<span class="token function">ls</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="chapter-3-linux系统"><a href="#chapter-3-linux系统" class="header-anchor">#</a> Chapter 3 Linux系统</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ls</span> -l -a -t -r -S -h -d -F
<span class="token function">ls</span> <span class="token function">dir</span>
<span class="token function">ls</span> dir1 dir2
<span class="token function">file</span> filename <span class="token comment">#文件类型</span>
<span class="token function">less</span> filename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="chapter-4-操作文件与目录"><a href="#chapter-4-操作文件与目录" class="header-anchor">#</a> Chapter 4 操作文件与目录</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 通配符</span>
*
?
<span class="token punctuation">[</span>charactor<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">!</span>charactor<span class="token punctuation">]</span>
<span class="token punctuation">[</span>:alnum:<span class="token punctuation">]</span>
<span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span>
<span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span>
<span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span>
<span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> -a -i -r -u -v
<span class="token function">cp</span> item1 item2
<span class="token function">cp</span> item<span class="token punctuation">..</span>. <span class="token function">dir</span>
<span class="token function">mv</span> -i -u -v
<span class="token function">mv</span> item1 item2
<span class="token function">mv</span> item<span class="token punctuation">..</span>. <span class="token function">dir</span>
<span class="token function">mv</span> dir<span class="token punctuation">..</span>. <span class="token function">dir</span>
<span class="token function">mkdir</span> <span class="token function">dir</span>
<span class="token function">mkdir</span> dir1 dir2
<span class="token function">rm</span> -i -r -f -v
<span class="token function">rm</span> <span class="token function">file</span>
<span class="token function">rm</span> -r <span class="token function">file</span> <span class="token function">dir</span>
<span class="token function">rm</span> -rf <span class="token function">file</span> <span class="token function">dir</span>
<span class="token function">ln</span> -s item <span class="token function">link</span> <span class="token comment">#符号链接，文件目录均可</span>
<span class="token function">ln</span> -snf newitem <span class="token function">link</span> <span class="token comment">#修改符号链接</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="chapter-5-命令的使用"><a href="#chapter-5-命令的使用" class="header-anchor">#</a> Chapter 5 命令的使用</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">type</span> <span class="token builtin class-name">command</span> <span class="token comment">#显示命令类型</span>
<span class="token function">which</span> <span class="token builtin class-name">command</span> <span class="token comment">#显示可执行程序位置</span>
<span class="token builtin class-name">help</span> <span class="token builtin class-name">command</span> <span class="token comment">#显示shell内置命令的帮助文档</span>
<span class="token builtin class-name">command</span> --help <span class="token comment">#显示命令使用信息</span>
whatis <span class="token builtin class-name">command</span> <span class="token comment"># 显示命令简要描述</span>
zless <span class="token function">file</span> <span class="token comment">#显示由gzip压缩的文本文件.gz的内容</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'string'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="chapter-6-重定向"><a href="#chapter-6-重定向" class="header-anchor">#</a> Chapter 6 重定向</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&gt;</span> filename <span class="token comment">#重定向标准输出（从文件的首位置开始覆盖文件）</span>
<span class="token operator">&gt;</span> filename <span class="token comment">#删除文件内容分或创建空文件（从文件的首位置开始覆盖文件）</span>
<span class="token builtin class-name">command</span> <span class="token operator">&gt;&gt;</span> filename <span class="token comment">#重定向标准输出（从文件的尾部开始添加输出内容）</span>
<span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> filename <span class="token comment">#标准错误重定向</span>
<span class="token builtin class-name">command</span> <span class="token operator">&amp;&gt;</span> filename <span class="token comment">#将标准输出和标准错误重定向到文件</span>
<span class="token builtin class-name">command</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> <span class="token comment">#&gt;&amp;2，即 1&gt;&amp;2，把结果输出到标准错误</span>
/dev/null <span class="token comment">#特殊文件称为位桶（bit bucket）</span>

<span class="token function">cat</span> file<span class="token punctuation">..</span>. <span class="token comment">#合并文件，用于显示短的文本文件</span>
<span class="token function">cat</span> -n <span class="token function">file</span> <span class="token comment">#显示行号</span>
<span class="token function">cat</span> -s <span class="token function">file</span> <span class="token comment">#不显示多余空白行</span>
<span class="token function">cat</span> -A <span class="token function">file</span> <span class="token comment">#显示非打印字符</span>
<span class="token function">cat</span> movie.mpeg.0* <span class="token operator">&gt;</span> movie.mpeg <span class="token comment">#将拆分的文件合并</span>
<span class="token function">cat</span> <span class="token comment">#将标准输入的内容复制到标准输出当中（Ctrl+D告知cat到达EOF）</span>
<span class="token function">cat</span> <span class="token operator">&lt;</span> filename <span class="token comment">#将标准输入源变为文件</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> filename <span class="token comment">#将接下来的内容输入文件</span>

command1 <span class="token operator">|</span> command2 <span class="token comment">#将前一个命令的标准输出作为后一个命令的标准输入</span>
<span class="token function">ls</span> /bin /usr/bin <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span><span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">less</span> <span class="token comment">#过滤器sort：排序，uniq：删除重复行，uniq -d：反过来查看重复行</span>
<span class="token function">wc</span> <span class="token function">file</span> <span class="token comment">#显示文件中包含的行数、字数、字节数</span>
<span class="token function">wc</span> -l <span class="token function">file</span> <span class="token comment">#仅显示文件中包含的行数</span>
<span class="token function">ls</span> /bin /usr/bin <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">wc</span> -l
<span class="token function">grep</span> pattern file<span class="token punctuation">..</span>. <span class="token comment">#打印匹配行</span>
<span class="token function">ls</span> /bin /usr/bin <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">zip</span> <span class="token comment">#包含zip的所有文件，grep -i：忽略大小写，grep -v：只输出和模式不匹配的行</span>
<span class="token function">head</span> -n <span class="token number">5</span> <span class="token function">file</span> <span class="token comment">#输出前5行</span>
<span class="token function">tail</span> -n <span class="token number">5</span> <span class="token function">file</span> <span class="token comment">#输出后5行</span>
<span class="token function">ls</span> /usr/bin <span class="token operator">|</span> <span class="token function">tail</span> -n <span class="token number">5</span>
<span class="token function">tail</span> -f /var/log/messages <span class="token comment">#持续监视这个文件，一旦添加新行会立即显示（Ctrl+C后停止）</span>
<span class="token function">tee</span> filename stdin <span class="token comment">#将键盘输入输出到文件中</span>
<span class="token function">ping</span> www.baidu.com <span class="token operator">|</span> <span class="token function">tee</span> filename<span class="token punctuation">..</span>. <span class="token comment">#可以同时写到多个文件</span>
<span class="token function">ping</span> www.baidu.com <span class="token operator">|</span> <span class="token function">tee</span> -a filename <span class="token comment">#追加到文件后面用-a</span>
<span class="token function">ls</span> /usr/bin <span class="token operator">|</span> <span class="token function">tee</span> filename <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">zip</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="chapter-7-透过shell看世界"><a href="#chapter-7-透过shell看世界" class="header-anchor">#</a> Chapter 7 透过shell看世界</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token comment">#复读机</span>
<span class="token builtin class-name">echo</span> *
<span class="token builtin class-name">echo</span> D*
<span class="token builtin class-name">echo</span> *s
<span class="token builtin class-name">echo</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span><span class="token punctuation">]</span>*
<span class="token builtin class-name">echo</span> /usr/*/share
<span class="token builtin class-name">echo</span> .* <span class="token comment">#会有.和..</span>
<span class="token function">ls</span> -d .* <span class="token comment">#会有.和..</span>
<span class="token function">ls</span> -d .<span class="token punctuation">[</span><span class="token operator">!</span>.<span class="token punctuation">]</span>?* <span class="token comment">#显示隐藏文件</span>
<span class="token builtin class-name">echo</span> ~
<span class="token builtin class-name">echo</span> ~word
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>expression<span class="token variable">))</span></span> <span class="token comment">#算术扩展，支持+ - * / % **，只支持整数</span>
<span class="token builtin class-name">echo</span> Front_<span class="token punctuation">{</span>A,B,C<span class="token punctuation">}</span>_Back
<span class="token builtin class-name">echo</span> Number<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>
<span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>Z<span class="token punctuation">..</span>A<span class="token punctuation">}</span>
<span class="token builtin class-name">echo</span> a<span class="token punctuation">{</span>A<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span>,B<span class="token punctuation">{</span><span class="token number">3,4</span><span class="token punctuation">}</span><span class="token punctuation">}</span>b <span class="token comment">#嵌套</span>
<span class="token builtin class-name">echo</span> -n <span class="token comment">#不换行输出</span>
<span class="token builtin class-name">echo</span> -e <span class="token comment">#可以解释字符串中转义字符</span>
<span class="token comment"># 一个带引号的字符串可以包含换行符</span>

<span class="token function">mkdir</span> Pics<span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> Pics
<span class="token function">mkdir</span> <span class="token punctuation">{</span><span class="token number">2009</span><span class="token punctuation">..</span><span class="token number">2011</span><span class="token punctuation">}</span>-0<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token number">2009</span><span class="token punctuation">..</span><span class="token number">2011</span><span class="token punctuation">}</span>-<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">..</span><span class="token number">12</span><span class="token punctuation">}</span>

<span class="token function">touch</span> filename <span class="token comment">#创建新文件；对已有文件更改访问时间和修改时间</span>
<span class="token function">touch</span> -c filename <span class="token comment">#避免使用touch创建新文件</span>
<span class="token function">touch</span> -a filename <span class="token comment">#仅更改文件访问时间</span>
<span class="token function">touch</span> -m filename <span class="token comment">#仅更改文件修改时间</span>
<span class="token function">touch</span> -t YYMMDDHHMM.SS filename <span class="token comment">#指定文件的访问和修改时间</span>
<span class="token function">touch</span> -c -t YYMMDDHHMM.SS filename <span class="token comment">#避免使用touch创建新文件</span>

<span class="token function">mkdir</span> -p playground/dir-<span class="token punctuation">{</span>00<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">}</span>,0<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">..</span><span class="token number">99</span><span class="token punctuation">}</span>,100<span class="token punctuation">}</span> <span class="token comment">#同时创建中间指明的文件夹</span>
<span class="token function">mkdir</span> <span class="token function">dir</span><span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$_</span> <span class="token comment">#创建并进入目录</span>
<span class="token function">touch</span> playground/dir-<span class="token punctuation">{</span>00<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">}</span>,0<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">..</span><span class="token number">99</span><span class="token punctuation">}</span>,100<span class="token punctuation">}</span>/file-<span class="token punctuation">{</span>A<span class="token punctuation">..</span>Z<span class="token punctuation">}</span>

<span class="token function">stat</span> fileordir <span class="token comment">#ls的增强版，显示文件的信息属性</span>

<span class="token builtin class-name">echo</span> <span class="token environment constant">$USER</span> <span class="token comment">#显示参数[variable]</span>
<span class="token function">printenv</span> <span class="token operator">|</span> <span class="token function">less</span> <span class="token comment">#查看可用参数列表，printenv | cat同理</span>

<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span> 将命令的输出作为扩展模式
<span class="token function">open</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
<span class="token function">ls</span> -l <span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> <span class="token function">cp</span><span class="token variable">)</span></span> 获得可执行程序目录列表
<span class="token function">file</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> /usr/bin/* <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">zip</span><span class="token variable">)</span></span>

<span class="token function">ls</span> -l <span class="token string">&quot;two words.txt&quot;</span> <span class="token comment">#双引号屏蔽单词分割、路径扩展、波浪线扩展、花括号扩展，但$依然有效</span>
<span class="token function">mv</span> <span class="token string">&quot;two words.txt&quot;</span> two_words.txt
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cal</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">cal</span><span class="token variable">)</span></span>&quot;</span> <span class="token comment">#没有&quot;&quot;会把每个当作参数，中间用界定符隔开，但用了&quot;&quot;后会当作一个参数</span>
<span class="token builtin class-name">echo</span> <span class="token string">'<span class="token variable"><span class="token variable">$(</span><span class="token function">cal</span><span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span><span class="token number">2</span>*2<span class="token variable">)</span></span>'</span> <span class="token comment">#单引号会屏蔽掉所有的扩展</span>
<span class="token punctuation">\</span> <span class="token comment">#阻止单个字符的扩展，\ , \!, \$, \&amp;, \\</span>
<span class="token comment"># 特殊字符</span>
<span class="token punctuation">\</span>a <span class="token comment">#响铃</span>
<span class="token punctuation">\</span>b <span class="token comment">#退格</span>
<span class="token punctuation">\</span>n
<span class="token punctuation">\</span>r <span class="token comment">#光标移至行首但不换行</span>
<span class="token punctuation">\</span>f <span class="token comment">#换行但光标仍旧停留在原来的位置</span>
<span class="token punctuation">\</span>c <span class="token comment">#最后不加上换行符号</span>
<span class="token punctuation">\</span>t

caffeinate -t <span class="token number">3600</span> <span class="token comment">#阻止休眠，-d：阻止显示器睡眠，-i：防止系统空闲睡眠</span>
<span class="token function">sleep</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;Time's up<span class="token entity" title="\a">\a</span>&quot;</span>
<span class="token function">sleep</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Time's up&quot;</span> $<span class="token string">'<span class="token entity" title="\a">\a</span>'</span> <span class="token comment">#也可将\a放进$''中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="chapter-8-高级键盘技巧"><a href="#chapter-8-高级键盘技巧" class="header-anchor">#</a> Chapter 8 高级键盘技巧</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">clear</span>
Ctrl+L

Ctrl+A <span class="token comment">#移动光标到行首</span>
Ctrl+E <span class="token comment">#移动光标到行尾</span>
Ctrl+F <span class="token comment">#后移一个字符</span>
Ctrl+B <span class="token comment">#前移一个字符</span>
Ctrl+T <span class="token comment">#将光标处字符和前一字符对调位置</span>
Ctrl+K <span class="token comment">#剪切从光标到行尾的文本 killing</span>
Ctrl+U <span class="token comment">#剪切从光标到行首的文本</span>
Ctrl+Y <span class="token comment">#把killing-ring缓冲区中文本粘贴到光标处 yanking</span>

<span class="token function">history</span>
<span class="token function">history</span> <span class="token operator">|</span> <span class="token function">grep</span> bin
<span class="token operator">!</span><span class="token number">192</span> <span class="token comment">#历史记录扩展</span>

Ctrl+R <span class="token comment">#逆向搜索历史记录列表，Ctrl+J将历史记录复制进命令行进一步编辑</span>
<span class="token operator">!</span><span class="token operator">!</span> <span class="token comment">#等于↑+Enter</span>
<span class="token operator">!</span>string <span class="token comment">#重复最近以string开头的命令</span>
<span class="token operator">!</span>?string <span class="token comment">#重复最近的包含string的命令</span>

script <span class="token comment">#开始录制shell会话，默认文件typescript，-a追加内容</span>
<span class="token function">cat</span> typescript

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="chapter-9-权限"><a href="#chapter-9-权限" class="header-anchor">#</a> Chapter 9 权限</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">id</span>
<span class="token function">chmod</span> <span class="token number">777</span> <span class="token function">file</span> <span class="token comment">#8进制表示user, group, others的读、写、执行的权限</span>
<span class="token function">chmod</span> <span class="token punctuation">[</span>u<span class="token operator">|</span>g<span class="token operator">|</span>o<span class="token operator">|</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>+<span class="token operator">|</span>-<span class="token operator">|</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">[</span>rwx组合<span class="token punctuation">]</span> fileordir <span class="token comment">#符号表示法，例如u+x、-x、o-rx、u-x, go=rx</span>
<span class="token builtin class-name">umask</span>
<span class="token function">su</span> -
<span class="token function">sudo</span>
<span class="token function">chown</span> username <span class="token function">file</span>
<span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">whoami</span><span class="token variable">)</span></span> <span class="token function">file</span>
<span class="token function">chown</span> username: <span class="token comment">#并把文件所属群组更改为用户username所属的群组</span>
<span class="token function">chown</span> :admins <span class="token comment">#文件所属群组改为admins组，文件所有者不变</span>
<span class="token function">chgrp</span> 
<span class="token function">passwd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="chapter-10-进程"><a href="#chapter-10-进程" class="header-anchor">#</a> Chapter 10 进程</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> <span class="token comment">#输出和当前终端会话相关的进程</span>
<span class="token function">ps</span> x <span class="token comment">#显示所有进程</span>
<span class="token function">ps</span> aux <span class="token comment">#显示更多信息，VSZ：虚拟耗用内存大小（KB），RSS：使用物理内存大小（KB），START：进程开始时间</span>
<span class="token function">top</span> <span class="token comment">#动态显示系统进程，mac下进入top界面?显示帮助，o指定排序方式如cpu、mem，q退出</span>
<span class="token builtin class-name">command</span> <span class="token operator">&amp;</span> <span class="token comment">#命令后加&amp;可以使程序在后台运行</span>
<span class="token function">jobs</span> <span class="token comment">#查看从终端启动的所有作业</span>
<span class="token function">fg</span> %jobspec <span class="token comment">#如fg %1，将后台1号进程返回到前台来运行</span>
Ctrl+Z <span class="token comment">#暂停前台进程</span>
<span class="token function">bg</span> %jobspec
<span class="token function">kill</span> pid
<span class="token function">kill</span> %jobspec
vm_stat
vm_stat <span class="token function">time</span> <span class="token comment">#例如vm_stat 5：5秒一更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="part-two-配置与环境"><a href="#part-two-配置与环境" class="header-anchor">#</a> Part two 配置与环境</h2> <h3 id="chapter-11-环境"><a href="#chapter-11-环境" class="header-anchor">#</a> Chapter 11 环境</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">printenv</span> <span class="token comment">#显示环境变量</span>
<span class="token function">printenv</span> var <span class="token comment">#例如printenv USER等于echo $USER</span>
<span class="token builtin class-name">set</span> <span class="token comment">#显示shell变量和环境变量，按字母顺序排序</span>
<span class="token builtin class-name">export</span>
<span class="token builtin class-name">alias</span> <span class="token comment">#显示别名列表</span>
<span class="token function">nano</span> <span class="token comment">#文本编辑器 -m选项激活鼠标</span>
<span class="token builtin class-name">source</span> .bash_profile <span class="token comment">#立即激活在~下的login shell启动文件的修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="chapter-12-vi简介"><a href="#chapter-12-vi简介" class="header-anchor">#</a> Chapter 12 VI简介</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vi</span>
<span class="token function">vi</span> filename
<span class="token comment"># 启动和退出</span>
esc <span class="token comment">#返回命令模式</span>
:q
:q<span class="token operator">!</span>
<span class="token comment"># 进入插入模式</span>
i
a
A
<span class="token comment"># 保存文件</span>
:w
:wq
:w anothername <span class="token comment">#另存为</span>
ZZ <span class="token comment">#保存并退出，:wq</span>

<span class="token comment"># 移动光标</span>
h <span class="token comment">#左移 5h</span>
j <span class="token comment">#下移 6j</span>
k <span class="token comment">#上移 7k</span>
l <span class="token comment">#右移 8l</span>
<span class="token number">0</span> <span class="token comment">#至行首</span>
^ <span class="token comment">#至本行第一个非空字符</span>
$ <span class="token comment">#至行尾</span>
w <span class="token comment">#下一单词或标点的开头</span>
W <span class="token comment">#下一单词开头，忽略标点</span>
b <span class="token comment">#上一单词或标点的开头</span>
B <span class="token comment">#上一单词开头，忽略标点</span>
↑ <span class="token comment">#上一页 Ctrl+F</span>
↓ <span class="token comment">#下一页 Ctrl+B</span>
number G <span class="token comment">#至第number行，如1G</span>
G <span class="token comment">#至最后一行</span>

<span class="token comment"># 基本编辑</span>
u <span class="token comment">#撤销最后一步操作</span>
o <span class="token comment">#当前行下方插入一行</span>
O <span class="token comment">#当前行上方插入一行</span>
x <span class="token comment">#删除当前字符</span>
number x <span class="token comment">#删除当前字符起number个字符， 如3x</span>
<span class="token function">dd</span> <span class="token comment">#删除（剪切）当前行</span>
number <span class="token function">dd</span> <span class="token comment">#删除（剪切）当前行开始的number行，如5dd</span>
dw <span class="token comment">#删除（剪切）当前字符到下一个单词（包括标点）</span>
dW <span class="token comment">#删除（剪切）当前字符到下一个单词（忽略标点）</span>
d$ <span class="token comment">#删除（剪切）字符到当前行末尾</span>
d0 <span class="token comment">#删除（剪切）字符到当前行起始</span>
d^ <span class="token comment">#删除（剪切）当前字符到当前行下一个非空字符</span>
dG <span class="token comment">#删除（剪切）当前行到文件末尾</span>
d number G <span class="token comment">#删除（剪切）当前行到文件第number行，如d20G</span>
p <span class="token comment">#将缓存内容粘贴到光标之后</span>
P <span class="token comment">#将缓存内容粘贴到光标之前</span>
yy <span class="token comment">#复制当前行</span>
number yy <span class="token comment">#复制当前行开始的number行，如5yy</span>
yw <span class="token comment">#复制当前字符到下一个单词（包括标点）</span>
yW <span class="token comment">#复制当前字符到下一个单词（忽略标点）</span>
y$ <span class="token comment">#复制字符到当前行末尾</span>
y0 <span class="token comment">#复制字符到当前行起始</span>
y^ <span class="token comment">#复制当前字符到当前行下一个非空字符</span>
yG <span class="token comment">#复制当前行到文件末尾</span>
y number G <span class="token comment">#复制当前行到文件第number行，如y20G</span>
J <span class="token comment">#将下一行合并到当前行末尾</span>

<span class="token comment"># 查找和替换</span>
f charactor <span class="token comment">#在行内进行搜索找到下一个指定字符如fa，输入;重复操作</span>
/string <span class="token comment">#搜索下一个指定字符串，输入命令n重复操作</span>
:%s/search/replace/gc <span class="token comment">#%代表第一行到最后一行，s指定替换操作，g代表全局（缺省g代表只替换每行第一个匹配项），末尾添加c，每次替换前会请求用户确认（y：执行，n：跳过此次替换，a：执行本次和之后的所有替换，q/esc：停止替换，l：执行此次替换后停止替换，E：向下滚动查看，Y：向上滚动查看）</span>
:1,5s/search/replace/g <span class="token comment">#1到5行</span>
:1,<span class="token variable">$s</span>/search/replace/g <span class="token comment">#1到最后一行</span>

<span class="token comment"># 编辑多个文件</span>
<span class="token function">vi</span> file1 file2<span class="token punctuation">..</span>.
:n <span class="token comment">#切换到下一个文件</span>
:N <span class="token comment">#切换到上一个文件</span>
:buffers <span class="token comment">#查看正在编辑的文件列表</span>
:buffer number <span class="token comment">#通过标号切换文件，如:buffer2</span>
:e filename <span class="token comment">#载入更多的文件（这样不适用用:n和:N来切换文件）</span>
:r filename <span class="token comment">#将指定文件内容全部插入到光标位置</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># vim中批量添加注释</span>
<span class="token comment"># 块选择模式</span>
<span class="token comment">## 批量注释：</span>
<span class="token comment">## Ctrl-v进入块选择模式，移动光标可以进行矩形选择，待选中需注释的行后，按大写I进入行首插入模式输入注释符号//或#，输入完毕后，按两下ESC，Vim会自动将选中的行首加上注释</span>
<span class="token comment">## 取消注释：</span>
<span class="token comment">## Ctrl-v进入块选择模式，移动光标可以进行矩形选择，选好要删除的注释后按d即可删除注释，ESC保存退出</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># ~/.vimrc中vim配置</span>
syntax on <span class="token string">&quot;语法高亮
set number &quot;</span>显示行号
<span class="token builtin class-name">set</span> cursorcolumn <span class="token string">&quot;当前列高亮
set cursorline &quot;</span>当前行高亮
<span class="token builtin class-name">set</span> <span class="token assign-left variable">tabstop</span><span class="token operator">=</span><span class="token number">4</span> <span class="token string">&quot;设定tab长度为4
set softtabstop=4 &quot;</span>设定退格键可以一次删掉4个空格
<span class="token builtin class-name">set</span> <span class="token assign-left variable">shiftwidth</span><span class="token operator">=</span><span class="token number">4</span> <span class="token string">&quot;程序中自动缩进所使用的空白长度
set incsearch &quot;</span>搜索内容时就显示搜索结果
<span class="token builtin class-name">set</span> hlsearch <span class="token string">&quot;搜索时高亮显示被找到的文本
set smartindent &quot;</span>开启新行时使用智能自动缩进
<span class="token builtin class-name">set</span> autoindent <span class="token string">&quot;开启自动对齐
set noexpandtab &quot;</span>不要用空格代替制表符
<span class="token builtin class-name">set</span> showmatch <span class="token string">&quot;高亮显示对应的括号
set autowrite &quot;</span>切换buffer时自动保存当前文件
<span class="token builtin class-name">set</span> ruler <span class="token string">&quot;在右下角显示光标位置的状态行
set cmdheight=2 &quot;</span>命令行在状态行的高度（默认1）
<span class="token builtin class-name">set</span> <span class="token assign-left variable">mouse</span><span class="token operator">=</span>i &quot;在插入模式可以使用鼠标
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 使用Vundle管理配置vim插件</span>
<span class="token comment"># 安装Vundle</span>
<span class="token function">git</span> clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
<span class="token comment"># 修改 ~/.vimrc</span>
<span class="token comment"># 参照 https://github.com/gmarik/vundle</span>
<span class="token comment"># 安装插件</span>
<span class="token comment"># 下载插件，放到 ~/.vim/bundle/ 目录后在 vim 里运行</span>
:PluginInstall
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="chapter-13-定制提示符"><a href="#chapter-13-定制提示符" class="header-anchor">#</a> Chapter 13 定制提示符</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># $PS1是“prompt string 1”的缩写</span>
<span class="token comment"># Terminal color</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLICOLOR</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LSCOLORS</span><span class="token operator">=</span>gxfxcxdxbxegedabagacad
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'\[<span class="token entity" title="\033">\033</span>[01;32m\]\u@\h\[<span class="token entity" title="\033">\033</span>[00m\]:\[<span class="token entity" title="\033">\033</span>[01;36m\]\w\[<span class="token entity" title="\033">\033</span>[00m\]\$ '</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm-256color
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>CLICOLOR: 前景色和背景色的字符串合并值
LSCOLORS: 对于不同变量所采用的颜色方案,具体看如下表格:
a black
b red
c green
d brown
e blue
f magenta
g cyan
h light grey
A bold black, usually shows up as dark grey
B bold red
C bold green
D bold brown, usually shows up as yellow
E bold blue
F bold magenta
G bold cyan
H bold light grey; looks like bright white
x default foreground or background
而文件类型列表如下:
1. directory
2. symbolic link
3. socket
4. pipe
5. executable
6. block special
7. character special
8. executable with setuid bit set
9. executable with setgid bit set
10. directory writable to others, with sticky bit
11. directory writable to others, without sticky
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="part-three-常见任务和主要工具"><a href="#part-three-常见任务和主要工具" class="header-anchor">#</a> Part three 常见任务和主要工具</h2> <h3 id="chapter-14-软件包管理"><a href="#chapter-14-软件包管理" class="header-anchor">#</a> Chapter 14 软件包管理</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查找库中软件包</span>
<span class="token function">apt-get</span> update
<span class="token function">apt-cache</span> search search_string <span class="token comment">#Debian系统</span>
yum search search_string <span class="token comment">#CentOS系统</span>
<span class="token comment"># 安装库中软件包</span>
<span class="token function">apt-get</span> update
<span class="token function">apt-get</span> <span class="token function">install</span> package_name <span class="token comment">#Debian系统</span>
yum <span class="token function">install</span> package_name <span class="token comment">#CentOS系统</span>
<span class="token comment"># 安装软件包文件的软件包（不解决依赖关系）</span>
dpkg --install package_file <span class="token comment">#Debian系统</span>
<span class="token function">rpm</span> -i package_file <span class="token comment">#CentOS系统</span>
<span class="token comment"># 卸载软件包</span>
<span class="token function">apt-get</span> remove package_name <span class="token comment">#Debian系统</span>
yum erase package_name <span class="token comment">#CentOS系统</span>
<span class="token comment"># 更新库中软件包</span>
<span class="token function">apt-get</span> update<span class="token punctuation">;</span> <span class="token function">apt-get</span> upgrade <span class="token comment">#Debian系统</span>
yum update <span class="token comment">#CentOS系统</span>
<span class="token comment"># 更新软件包文件中的软件包</span>
dpkg --install package_file <span class="token comment">#Debian系统</span>
<span class="token function">rpm</span> -U package_file <span class="token comment">#CentOS系统</span>
<span class="token comment"># 列出已安装的软件包列表</span>
dpkg --list <span class="token comment">#Debian系统</span>
<span class="token function">rpm</span> -qa <span class="token comment">#CentOS系统</span>
<span class="token comment"># 判断软件包是否安装</span>
dpkg --status package_name <span class="token comment">#Debian系统</span>
<span class="token function">rpm</span> -q package_name <span class="token comment">#CentOS系统</span>
<span class="token comment"># 显示已安装软件包的相关信息</span>
<span class="token function">apt-cache</span> show package_name <span class="token comment">#Debian系统</span>
yum info package_name <span class="token comment">#CentOS系统</span>
<span class="token comment"># 查看某个文件是由哪个软件包安装得到的</span>
dpkg --search file_name <span class="token comment">#Debian系统</span>
<span class="token function">rpm</span> -qf file_name <span class="token comment">#CentOS系统</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="chapter-15-存储介质"><a href="#chapter-15-存储介质" class="header-anchor">#</a> Chapter 15  存储介质</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mount</span> <span class="token comment">#显示已挂载的文件系统列表</span>
<span class="token function">mount</span> -t <span class="token builtin class-name">type</span> disk <span class="token function">dir</span> <span class="token comment">#挂载到新节点，如mount -t iso9660 /dev/hdc /mnt/cdrom</span>
unmount disk <span class="token comment">#卸载设备，如unmount /dev/disk3s1</span>
last <span class="token comment">#查看用户终端登录情况</span>
<span class="token function">fdisk</span> <span class="token comment">#磁盘分区</span>
<span class="token function">mkfs</span> <span class="token comment">#创建新的文件系统（make filesystem）</span>
<span class="token function">fsck</span> <span class="token comment">#测试修复文件系统（filesystem check）</span>
md5sum
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="chapter-16-网络"><a href="#chapter-16-网络" class="header-anchor">#</a> Chapter 16 网络</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> 
<span class="token function">traceroute</span>
<span class="token function">ifconfig</span>
<span class="token function">netstat</span> -i <span class="token comment">#查看网络接口</span>
<span class="token function">netstat</span> -r <span class="token comment">#查看网络路由表</span>
<span class="token function">wget</span> http://<span class="token punctuation">..</span>. <span class="token comment">#文件下载到当前文件夹（网站上、FTP站点，单个、多个文件）</span>
<span class="token function">wget</span> -O name url <span class="token comment">#指定保存名字</span>
<span class="token function">wget</span> -limit-rate<span class="token operator">=</span>300k url <span class="token comment">#限制下载速度</span>
<span class="token function">wget</span> -c url <span class="token comment">#断点续传</span>
<span class="token function">wget</span> -b url <span class="token comment">#后台下载</span>
<span class="token function">wget</span> –user-agent<span class="token operator">=</span><span class="token string">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16&quot;</span> url <span class="token comment">#伪装浏览器</span>
<span class="token function">wget</span> –tries<span class="token operator">=</span><span class="token number">40</span> url <span class="token comment">#设置重试次数（默认20次）</span>
<span class="token function">wget</span> -i filelist.txt <span class="token comment">#从filelist.txt获取下载地址</span>
<span class="token function">wget</span> -p url <span class="token comment">#下载所有为了html页面显示正常的文件</span>
<span class="token function">ssh</span> -p port username@remoteserver
<span class="token function">ssh</span> -p port username@remoteserver <span class="token string">'ls *'</span> <span class="token operator">&gt;</span> dirlist.txt <span class="token comment">#将远程服务器当前目录输出到本地文件，单引号内运行在远程服务器</span>
<span class="token function">ssh</span> -p port username@remoteserver <span class="token string">'ls * &gt; dirlist.txt'</span> <span class="token comment">#将将远程服务器当前目录输出到远程服务器的文件</span>
<span class="token function">scp</span> -P port localfile username@remoteserver:fileorfolder
<span class="token function">scp</span> -P port -r username@remoteserver:folder localfolder
<span class="token function">sftp</span> <span class="token comment">#使用SSH加密隧道的ftp</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="chapter-17-文件搜索"><a href="#chapter-17-文件搜索" class="header-anchor">#</a> Chapter 17 文件搜索</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">locate</span> string <span class="token comment">#匹配路径中出现的串</span>
<span class="token function">locate</span> path/file <span class="token comment">#搜索与路径名和给定子字符串相匹配的文件</span>

<span class="token comment"># find</span>
<span class="token function">find</span> path <span class="token comment">#路径下文件列表清单，如find ~ | wc -l</span>
<span class="token comment"># test选项和action选项的顺序很重要</span>

<span class="token comment">## test选项用来匹配</span>
<span class="token function">find</span> ~ -type d <span class="token comment">#目录</span>
<span class="token function">find</span> ~ -type f <span class="token comment">#普通文件</span>
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> -type l <span class="token comment">#符号链接</span>
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> -type f -name <span class="token string">&quot;*.jpg&quot;</span> -size +1M <span class="token operator">|</span> <span class="token function">wc</span> -l <span class="token comment">#普通文件、jpg图片文件、大小超过1M（k：KB，M：MB，G：GB）</span>
<span class="token comment">### 其他test参数</span>
-regex pattern <span class="token comment">#匹配扩展正则表达式</span>
-cmin n <span class="token comment">#匹配n分钟前改变状态的文件或目录。不到n分钟就用-n，超过n分钟就用+n</span>
-cnewer <span class="token function">file</span> <span class="token comment">#匹配状态的修改时间比file文件更晚的文件或目录</span>
-ctime n <span class="token comment">#匹配n*24小时前文件状态被改变的文件或目录</span>
-empty <span class="token comment">#匹配空文件及空目录</span>
-iname pattern <span class="token comment">#与-name相似，不区分大小写</span>
-mmin n <span class="token comment">#匹配n分钟前只改变内容的文件或目录。不到n分钟就用-n，超过n分钟就用+n</span>
-mtime n <span class="token comment">#匹配n*24小时前文件仅内容被改变的文件或目录</span>
-newer <span class="token function">file</span> <span class="token comment">#匹配内容的修改时间比file文件更晚的文件或目录</span>
-nouser <span class="token comment">#匹配不属于有效用户的文件或目录，查找属于已删除账户的文件和检测攻击者的活动</span>
-nogroup <span class="token comment">#匹配不属于有效组的文件或目录</span>
-perm mode <span class="token comment">#匹配访问权限与给定模式一样的文件或目录，模式可以是8进制如777</span>
-user name <span class="token comment">#匹配属于name用户的文件或目录</span>
<span class="token comment">### 操作符</span>
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> <span class="token punctuation">\</span><span class="token punctuation">(</span> -type f -not -perm 0600 <span class="token punctuation">\</span><span class="token punctuation">)</span> -or <span class="token punctuation">\</span><span class="token punctuation">(</span> -type d -not -perm 0700 <span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token comment">#访问权限不是0600的文件和访问权限不是0700的目录</span>
<span class="token comment"># find执行时，是扫描每一个文件或目录判断是否匹配该test检测条件，所以不是and而是or</span>
-and <span class="token comment">#没有显式操作符时的默认逻辑关系，缩写-a</span>
-or <span class="token comment">#缩写-o</span>
-not <span class="token comment">#查找使该操作符后面的检测条件为假的匹配文件，缩写-!（mac不行）</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#区分逻辑表达式优先级，通常\(\)</span>

<span class="token comment">## action选项做处理</span>
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> -type f -iname <span class="token string">&quot;*.bak&quot;</span> -delete
<span class="token comment">### 预定义动作</span>
<span class="token comment">### 有可能需要将前面有操作符的部分整体括起来，是因为test选项与action选项间默认操作符是and</span>
-delete
-ls <span class="token comment">#以标准格式输出文件名及其他信息</span>
-print <span class="token comment">#将匹配到的文件或目录的全路径输出</span>
-quit <span class="token comment">#一旦匹配成功便退出</span>
<span class="token comment">### 用户自定义操作</span>
-exec <span class="token builtin class-name">command</span> <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token comment">#例find $(pwd) -type d -name &quot;D*&quot; -print -exec ls -l '{}' ';'每次查找到匹配文件或目录后都会执行一次指令</span>
<span class="token function">find</span> playground <span class="token punctuation">\</span><span class="token punctuation">(</span> -type f -not -perm 0600 -exec <span class="token function">chmod</span> 0600 <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token punctuation">\</span><span class="token punctuation">)</span> -or <span class="token punctuation">\</span><span class="token punctuation">(</span> -type d -not -perm 0700 -exec <span class="token function">chmod</span> 0700 <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token punctuation">\</span><span class="token punctuation">)</span>
-ok <span class="token builtin class-name">command</span> <span class="token string">'{}'</span> <span class="token string">';'</span> <span class="token comment">#交互询问用户操作</span>
-exec <span class="token builtin class-name">command</span> <span class="token string">'{}'</span> <span class="token string">'+'</span> <span class="token comment">#将find搜索到的匹配结果作为指定命令的输入，一次完成对所有文件或目录的操作</span>
<span class="token function">xargs</span> <span class="token comment">#处理标准输入信息并将其转变为某指定命令的输入参数列表</span>
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> -type d -print <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">ls</span> -l
<span class="token function">find</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span> -type d -print0 <span class="token operator">|</span> <span class="token function">xargs</span> -0 <span class="token function">file</span> <span class="token comment">#解决空格被当做分隔符处理，用-print0产生以空字符作为各参数之间分隔符的输出结果，xargs的-0参数来支持以空字符为参数分隔符的输入（Linux上是--null，Mac是-0）</span>

<span class="token comment">## option选项</span>
-depth <span class="token comment">#引导find处理目录前先处理目录内文件，-delete自动调用</span>
-maxdepth levels <span class="token comment">#设置find陷入目录数的最大级别数</span>
-mindepth levels <span class="token comment">#设置find陷入目录数的最小级别数</span>
-mount <span class="token comment">#引导find不去遍历挂载在其他文件系统上的目录</span>
-noleaf <span class="token comment">#指导find不要基于“搜索类UNIX文件系统”这一假设来优化它的搜索，扫描DOS/Windows文件系统和CD时会有用到</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="chapter-18-归档和备份"><a href="#chapter-18-归档和备份" class="header-anchor">#</a> Chapter 18 归档和备份</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># gzip和bzip2不能直接压缩目录，压缩目录需要先使用tar打包再压缩</span>
<span class="token function">gzip</span> <span class="token function">file</span> <span class="token comment">#无损文件压缩（-k保留原文件，-f强制压缩，-l压缩统计，-r递归压缩目录中文件，-t检查压缩文件完整性，-v压缩时显示详细信息，-6默认：1-9从速度最快压缩比最低到速度最慢压缩比最高）</span>
<span class="token function">ls</span> -l /etc <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">&gt;</span> test.txt.gz
gunzip <span class="token function">file</span> <span class="token comment">#与gzip对应的解压，与gzip -d file一样</span>
zcat test.txt.gz <span class="token comment">#查看压缩文件文本内容，等于gunzip -c test.txt.gz | cat</span>
zless test.txt.gz <span class="token comment">#查看压缩文件文本内容，等于gunzip -c test.txt.gz | less</span>
<span class="token function">bzip2</span> <span class="token function">file</span> <span class="token comment">#与gzip相仿，高质量压缩但慢，压缩后文件后缀.bz2</span>
<span class="token function">bzip2</span> -d <span class="token function">file</span>
bunzip2 <span class="token function">file</span>
bzcat <span class="token function">file</span>
bzip2recover <span class="token function">file</span> <span class="token comment">#用于恢复损坏的.bz2文件</span>

<span class="token comment"># tape archive</span>
<span class="token function">tar</span> mode<span class="token punctuation">[</span>option<span class="token punctuation">]</span> pathname
<span class="token comment">## mode</span>
c <span class="token comment">#创建文件或目录的归档文件</span>
x <span class="token comment">#从归档文件中提取文件</span>
t <span class="token comment">#列出归档文件的内容</span>
r <span class="token comment">#在归档文件末尾追加指定路径名</span>
<span class="token function">tar</span> cf playground.tar playground <span class="token comment">#f指出归档名字</span>
<span class="token function">tar</span> tf playground.tar <span class="token comment">#列出归档文件的内容</span>
<span class="token function">tar</span> tvf playground.tar <span class="token comment">#列出归档文件更详细的内容</span>
<span class="token function">tar</span> xf <span class="token punctuation">..</span>/playground.tar <span class="token comment">#将某归档文件提取到当前目录，默认相对路径，如果是绝对路径，则会把前面的绝对路径都打包。</span>
<span class="token function">tar</span> xf archive.tar pathname<span class="token punctuation">..</span>. <span class="token comment">#只提取指定文件</span>
<span class="token function">tar</span> xf <span class="token punctuation">..</span>/playground.tar --wildcards <span class="token string">'home/me/playground/dir-*/file-A'</span> <span class="token comment">#通过--wildcards选项支持通配符</span>
<span class="token function">find</span> playground -name <span class="token string">'file-A'</span> -exec <span class="token function">tar</span> rf playground.tar <span class="token string">'{}'</span> <span class="token string">'+'</span> <span class="token comment">#启用附加模式-r将匹配文件添加到归档文件中</span>
<span class="token function">find</span> playground -name <span class="token string">'file-A'</span> <span class="token operator">|</span> <span class="token function">tar</span> cf - -T - <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">&gt;</span> playground.tgz <span class="token comment">#-指输入输出，'-T -' 等于 '--files-from=-'</span>
<span class="token function">find</span> playground -name <span class="token string">'file-A'</span> <span class="token operator">|</span> <span class="token function">tar</span> czf playground.tgz -T - <span class="token comment">#tar+gzip压缩归档文件</span>
<span class="token function">find</span> playground -name <span class="token string">'file-A'</span> <span class="token operator">|</span> <span class="token function">tar</span> cjf playground.tbz -T - <span class="token comment">#tar+bzip2压缩归档文件</span>
<span class="token function">tar</span> xzf playground.tgz <span class="token comment">#解压归档文件（.tgz or .tar.gz）</span>

<span class="token comment">## 将远程系统中某目录转移到本地</span>
<span class="token function">mkdir</span> remote-stuff
<span class="token builtin class-name">cd</span> remote-stuff
<span class="token function">ssh</span> remote-sys <span class="token string">'tar cf - Documents'</span> <span class="token operator">|</span> <span class="token function">tar</span> xf -

<span class="token comment"># zip既是文件压缩工具又是文件归档工具，主要用其与Windows交换文件</span>
<span class="token function">zip</span> -r playground.zip playground
<span class="token function">unzip</span> playground.zip
<span class="token function">unzip</span> playground.zip playground/dir-001/file-A <span class="token comment">#提取指定文件</span>
<span class="token function">unzip</span> -l playground.zip playground/dir-001/file-A <span class="token comment">#只列出内容，不会提取</span>
<span class="token function">unzip</span> -v playground.zip playground/dir-001/file-A <span class="token comment">#列出详细内容，不会提取</span>
<span class="token function">find</span> playground -name <span class="token string">'file-A'</span> <span class="token operator">|</span> <span class="token function">zip</span> -@ file-A.zip <span class="token comment">#通过-@选项将多个文件送至zip压缩</span>
<span class="token function">ls</span> -l /etc/ <span class="token operator">|</span> <span class="token function">zip</span> ls-etc.zip - <span class="token comment">#zip支持标准输入，unzip不支持标准输入</span>
<span class="token function">unzip</span> -p ls-etc.zip <span class="token operator">|</span> <span class="token function">less</span> <span class="token comment">#-p选型使unzip以标准形式输出</span>

<span class="token comment"># 远程文件、目录的同步</span>
<span class="token function">rsync</span> options <span class="token builtin class-name">source</span> destination <span class="token comment">#source和destination可以是本地文件或目录、远程文件</span>
<span class="token function">rsync</span> -av playground foo <span class="token comment">#在foo目录下生成playground的镜像备份，-a递归归档保留文件属性，-v详细输出</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">backup</span><span class="token operator">=</span><span class="token string">'sudo rsync -av --delete /etc /home /usr/local /media/BigDisk/backup'</span> <span class="token comment">#--delete选项移除残留于备份目录中但源目录已不存在的文件</span>
<span class="token function">sudo</span> <span class="token function">rsync</span> -av --delete --rsh<span class="token operator">=</span>ssh /etc /home /usr/bin/local remote-sys:/backup <span class="token comment">## ssh远程使用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="chapter-19-正则表达式"><a href="#chapter-19-正则表达式" class="header-anchor">#</a> Chapter 19 正则表达式</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 正则表达式（Regular Expression）（POSIX标准）</span>
<span class="token comment">## grep（global regular expression print）的选项</span>
<span class="token function">grep</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> regex <span class="token punctuation">[</span>file<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
-i <span class="token comment">#忽略大小写</span>
-v <span class="token comment">#不匹配，与匹配相反</span>
-c <span class="token comment">#输出匹配数目</span>
-l <span class="token comment">#输出匹配项文件名，而非直接输出匹配行自身</span>
-L <span class="token comment">#输出不包含匹配项的文件名</span>
-n <span class="token comment">#每个匹配行前加上该行在文件内的行号</span>
-h <span class="token comment">#进行多文件搜索时，抑制文件名输出</span>
<span class="token comment">## 元字符^$.[]{}-?*+|\</span>
<span class="token comment">## 有些元字符在shell中有特殊含义，因此在命令中输入包含元字符的正则表达式时，应用引号括起来避免shell扩展</span>
<span class="token builtin class-name">.</span> <span class="token comment">#任意一个字符</span>
^ <span class="token comment">#锚，只与行的开头的内容进行比较，例grep -h '^zip' dirlist*.txt</span>
$ <span class="token comment">#锚，只与行的末尾的内容进行比较，例grep -h 'zip$' dirlist*.txt</span>
<span class="token function">grep</span> -h <span class="token string">'^zip$'</span> dirlist*.txt <span class="token comment">#匹配行开头和末尾都是zip的</span>
<span class="token string">'^$'</span> <span class="token comment">#匹配空行</span>
<span class="token function">grep</span> -i <span class="token string">'^..j.r$'</span> /usr/share/dict/words <span class="token comment">#Linux自带词典玩纵横填字字谜</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#中括号里可以指定要匹配的字符集（包括元字符），元字符在中括号里会失去特殊含义</span>
<span class="token punctuation">[</span>^bg<span class="token punctuation">]</span> <span class="token comment">#中括号中^在第一个出现表示否定，其他位置则为普通字符，这里表示既不是b也不是g</span>
^<span class="token punctuation">[</span>A-Za-z1-9<span class="token punctuation">]</span> <span class="token comment">#连字符-表示字符范围,这里表示以字母和数字开头的所有文件名</span>
<span class="token punctuation">[</span>-AZ<span class="token punctuation">]</span> <span class="token comment">#将连字符-放在中括号里第一个表示匹配连字符-</span>
<span class="token comment">## POSIX字符类（非正则表达式）</span>
<span class="token punctuation">[</span>:alnum:<span class="token punctuation">]</span> <span class="token comment">#[A-Za-z0-9]</span>
<span class="token punctuation">[</span>:word:<span class="token punctuation">]</span> <span class="token comment">#[A-Za-z0-9_]</span>
<span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span> <span class="token comment">#[A-Za-z]</span>
<span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span> <span class="token comment">#[0-9]</span>
<span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span> <span class="token comment">#[a-z]</span>
<span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span> <span class="token comment">#[A-Z]</span>
<span class="token punctuation">[</span>:punct:<span class="token punctuation">]</span> <span class="token comment">#标点符号字符[-!&quot;#$%&amp;'()*+,./:;&lt;=&gt;?@[\\\]_`{|}~]</span>
<span class="token punctuation">[</span>:blank:<span class="token punctuation">]</span> <span class="token comment">#空格和制表符</span>
<span class="token punctuation">[</span>:space:<span class="token punctuation">]</span> <span class="token comment">#空白字符（空格符、制表符、回车符、换行符、垂直制表符、换页符）[\t\r\n\v\f]</span>
<span class="token punctuation">[</span>:cntrl:<span class="token punctuation">]</span> <span class="token comment">#ASCII控制码，包括ASCII字符0~31和127</span>
<span class="token punctuation">[</span>:graph:<span class="token punctuation">]</span> <span class="token comment">#ASCII可见字符，包括ASCII字符33~126</span>
<span class="token punctuation">[</span>:print:<span class="token punctuation">]</span> <span class="token comment">#[:graph:]加空格</span>
<span class="token punctuation">[</span>:xdigit:<span class="token punctuation">]</span> <span class="token comment">#十六进制字符[0-9A-Fa-f]</span>

locale <span class="token comment">#查看域的命令</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>POSIX <span class="token comment">#将环境设置为传统UNIX行为，可将LANG变量设置为POSIX</span>

<span class="token comment">## POSIX基本正则表达式BRE和扩展正则表达式ERE</span>
<span class="token comment">## BRE只承认^$.[]*是元字符，ERE扩展了(){}?+|等</span>
<span class="token comment">## 对ERE的支持可以用grep -E 或egrep</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;AAA&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> -E <span class="token string">'AAA|BBB|CCC'</span> <span class="token comment">#或选项|</span>
<span class="token function">grep</span> -Eh <span class="token string">'^(bz|gz|zip)'</span> dirlist*txt <span class="token comment">#用()将选项元素与其他符号分开</span>
zgrep -El <span class="token string">'regex|regular expression'</span> *gz <span class="token comment">#可以对压缩文件进行搜索</span>
<span class="token comment">## 限定符</span>
? <span class="token comment">#前面的字符仅匹配0次或1次</span>
* <span class="token comment">#前面的元素匹配多次或0次</span>
<span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span> <span class="token punctuation">]</span>*<span class="token punctuation">\</span>. <span class="token comment">#以大写字母开头，以句号结束，中间是任意数目的字母和空格</span>
* <span class="token comment">#前面的元素匹配至少1次</span>
<span class="token punctuation">{</span>n<span class="token punctuation">}</span> <span class="token comment">#前面的元素恰好出现n次</span>
<span class="token punctuation">{</span>n,m<span class="token punctuation">}</span> <span class="token comment">#前面的元素出现n~m次之间</span>
<span class="token punctuation">{</span>n,<span class="token punctuation">}</span> <span class="token comment">#前面的元素出现次数超过n次</span>
<span class="token punctuation">{</span>,m<span class="token punctuation">}</span> <span class="token comment">#前面的元素出现次数不超过m次</span>

<span class="token comment">## less和vim按下/后可输入正则表达式搜索</span>
<span class="token comment">## less是扩展正则表达式，vim则是支持基本正则表达式（基本表达式中的文字字符加上\才会有特殊含义，比如\{3\}）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="chapter-20-文本处理"><a href="#chapter-20-文本处理" class="header-anchor">#</a> Chapter 20 文本处理</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sort</span> <span class="token operator">&gt;</span> test.txt <span class="token comment">#将标准输入按行排序，Ctrl-D 结束输入</span>
<span class="token function">sort</span> file1 file2 <span class="token punctuation">..</span>. <span class="token operator">&gt;</span> <span class="token function">file</span> <span class="token comment">#将多个文件融合排序</span>
<span class="token comment"># sort选项 -b：忽略开头空格，从第一个非空白字符开始排序；-f：排序时不区分大小写；-n：按数值顺序而非字母表顺序；-r：逆序排序；-o：将排序结果输出到文件；-k [num]：将第num个域作为排序关键值；-t [char]：定义字段分隔符；-u：删除重复行</span>
<span class="token function">du</span> -s /usr/share/* <span class="token operator">|</span> <span class="token function">head</span> <span class="token comment">#disk usage，-s选项仅显示总计</span>
<span class="token function">du</span> -s /usr/share/* <span class="token operator">|</span> <span class="token function">sort</span> -nr <span class="token operator">|</span> <span class="token function">head</span> <span class="token comment">#将按照空间大小降序排序</span>
<span class="token function">ls</span> -l /usr/bin <span class="token operator">|</span> <span class="token function">sort</span> -nr -k <span class="token number">5</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token comment">#指定-k 5，使用第5个字段作为排序的键</span>

<span class="token comment"># 若需要多键排序，假设当前目录有一文件distros.txt</span>
<span class="token comment"># 内容格式为：Fedora 10 11/25/2008</span>
<span class="token function">sort</span> --key<span class="token operator">=</span><span class="token number">1,1</span> --key<span class="token operator">=</span>2n distros.txt <span class="token comment">#多键值排序，第一个键1,1表示始于并终于第一个字段，第2个键2n表示第二个字段是第二个键且按数值排序</span>
<span class="token function">sort</span> -k <span class="token number">1</span> -k 2n file.txt <span class="token comment">#同上</span>
<span class="token function">sort</span> -k <span class="token number">3</span>.7nbr -k <span class="token number">3</span>.1nbr -k3.4nbr distros.txt <span class="token comment">#key中允许在字段中指定偏移</span>

<span class="token function">sort</span> -t <span class="token string">':'</span> -k <span class="token number">7</span> /etc/passwd <span class="token operator">|</span> <span class="token function">head</span> <span class="token comment">#定义字段分隔符，有的文件的字段之间以冒号（:）作为分界符</span>

<span class="token function">uniq</span> <span class="token comment">#配合sort使用，将已排序的文件删除重复行</span>
<span class="token function">sort</span> file.txt <span class="token operator">|</span> <span class="token function">uniq</span>
<span class="token function">sort</span> -u file.txt
<span class="token comment"># uniq选项 -c：输出重复行列表，重复行前统计出现的次数；-d：只输出重复行；-f [n]：忽略每行前n个字段，字段间以空格隔开；-i：行与行之间比较时忽略大小写；-s [n]：忽略每行的前n个字符</span>

<span class="token function">cut</span>
<span class="token function">paste</span>
<span class="token function">join</span>
<span class="token function">comm</span>
<span class="token function">diff</span>
patch
<span class="token function">tr</span>
<span class="token function">sed</span>
aspel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="chapter-23-编译程序"><a href="#chapter-23-编译程序" class="header-anchor">#</a> Chapter 23 编译程序</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># C源代码安装</span>
./configure
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="part-four-编写-shell-脚本"><a href="#part-four-编写-shell-脚本" class="header-anchor">#</a> Part four 编写 shell 脚本</h2> <h3 id="chapter-24-编写第一个-shell-脚本"><a href="#chapter-24-编写第一个-shell-脚本" class="header-anchor">#</a> Chapter 24 编写第一个 shell 脚本</h3> <p>shebang 告知操作系统，执行后面的脚本应该使用的解释器</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编写完脚本后，让脚本可执行需要加上可执行权限。对于脚本，有两种常见的权限设置：权限为755的脚本，每个人都可以执行；而权限为700的脚本，则只有脚本的所有人才能执行。</p> <p>将脚本或其软链接放在某些目录下是可以直接执行的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另外，通过行连接符（反斜杠-回车符序列）和缩进，可以增加脚本代码的可读性。脚本中可以使用制表符来实现缩进，但在命令行中，Tab键用来激活自动补齐功能。</p> <h3 id="chapter-25-启动一个项目"><a href="#chapter-25-启动一个项目" class="header-anchor">#</a> Chapter 25 启动一个项目</h3> <p>shell中，赋值时，变量名、等号和值之间不能含有空格。</p> <p>可以在一行中给多个变量赋值</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">5</span> <span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token string">&quot;a string&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>变量名称可以用花括号&quot;{}&quot;括起来</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mv</span> <span class="token variable">$filename</span> <span class="token variable">${filename}</span><span class="token number">1</span> <span class="token comment">#正确</span>
<span class="token function">mv</span> <span class="token variable">$filename</span> <span class="token variable">$filename1</span>   <span class="token comment">#错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="echo-版"><a href="#echo-版" class="header-anchor">#</a> echo 版</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Program to output a system information page</span>

<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;System Information Report For <span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%F %T %Z&quot;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">TIME_STAMP</span><span class="token operator">=</span><span class="token string">&quot;Generated <span class="token variable">$CURRENT_TIME</span>, by <span class="token environment constant">$USER</span>&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;HTML&gt;
	&lt;HEAD&gt;
		&lt;TITLE&gt;<span class="token variable">$TITLE</span>&lt;/TITLE&gt;
	&lt;/HEAD&gt;
	&lt;BODY&gt;
		&lt;H1&gt;<span class="token variable">$TITLE</span>&lt;/H1&gt;
		&lt;P&gt;<span class="token variable">$TIME_STAMP</span>&lt;/P&gt;
	&lt;/BODY&gt;
&lt;/HTML&gt;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="here-版"><a href="#here-版" class="header-anchor">#</a> here 版</h4> <p>here 文档是 I/O 重定向的另外一种形式，我们在脚本中嵌入正文文本，然后将其输入到一个命令的标准输入中。工作方式如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&lt;&lt;</span> <span class="token string">token
text
token</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>command 是接受标准输入的命令名，token 是用来指示嵌入文本结尾的字符串。</p> <p>现在修改脚本，使用 here 文档：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Program to output a system information page</span>

<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;System Information Report For <span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%F %T %Z&quot;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">TIME_STAMP</span><span class="token operator">=</span><span class="token string">&quot;Generated <span class="token variable">$CURRENT_TIME</span>, by <span class="token environment constant">$USER</span>&quot;</span>

<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">_EOF_
&lt;HTML&gt;
	&lt;HEAD&gt;
		&lt;TITLE&gt;<span class="token variable">$TITLE</span>&lt;/TITLE&gt;
	&lt;/HEAD&gt;
	&lt;BODY&gt;
		&lt;H1&gt;<span class="token variable">$TITLE</span>&lt;/H1&gt;
		&lt;P&gt;<span class="token variable">$TIME_STAMP</span>&lt;/P&gt;
	&lt;/BODY&gt;
&lt;/HTML&gt;
_EOF_</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>字符串 _EOF_ 含义是文件结尾，被选作 token，并且指示嵌入文本结尾。token 必须在一行中单独出现，而且文本行的末尾没有空格。</p> <p>here 文档的好处是，单引号和双引号失去了在 shell 中的特殊含义，也就是说成为了普通字符。</p> <h4 id="here-举例"><a href="#here-举例" class="header-anchor">#</a> here 举例</h4> <p>用 here 文档从远程 ftp 服务器上获取一个文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Script to retrieve a file via FTP</span>

<span class="token assign-left variable">FTP_SERVER</span><span class="token operator">=</span>ftp.nl.debian.org
<span class="token assign-left variable">FTP_PATH</span><span class="token operator">=</span>/debian/dists/lenny/main/instaler-386/current/images.cdrom
<span class="token assign-left variable">REMOTE_FILE</span><span class="token operator">=</span>debian-cd_info.tar.gz

<span class="token function">ftp</span> -n <span class="token operator">&lt;&lt;</span> _EOF_ <span class="token comment"># -n 禁止第一次连接的时候自动登录</span>
<span class="token function">open</span> <span class="token variable">$FTP_SERVER</span>
user anonymous me@linuxbox
<span class="token builtin class-name">cd</span> <span class="token variable">$FTP_PATH</span>
<span class="token builtin class-name">hash</span>
get <span class="token variable">$REMOTE_FILE</span>
bye
_EOF_
<span class="token function">ls</span> -l <span class="token variable">$REMOTE_FILE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如果将重定向操作符由&quot;&lt;&lt;&quot;改成&quot;&lt;&lt;-&quot;，shell 就会忽略在 here 文档中开头的 Tab 字符。这样就可以缩进 here 文档，提高可读性。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Script to retrieve a file via FTP</span>

<span class="token assign-left variable">FTP_SERVER</span><span class="token operator">=</span>ftp.nl.debian.org
<span class="token assign-left variable">FTP_PATH</span><span class="token operator">=</span>/debian/dists/lenny/main/instaler-386/current/images.cdrom
<span class="token assign-left variable">REMOTE_FILE</span><span class="token operator">=</span>debian-cd_info.tar.gz

<span class="token function">ftp</span> -n <span class="token operator">&lt;&lt;-</span> _EOF_
	<span class="token function">open</span> <span class="token variable">$FTP_SERVER</span>
	user anonymous me@linuxbox
	<span class="token builtin class-name">cd</span> <span class="token variable">$FTP_PATH</span>
	<span class="token builtin class-name">hash</span>
	get <span class="token variable">$REMOTE_FILE</span>
	bye
	_EOF_
<span class="token function">ls</span> -l <span class="token variable">$REMOTE_FILE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="chapter-26-自顶向下设计"><a href="#chapter-26-自顶向下设计" class="header-anchor">#</a> Chapter 26 自顶向下设计</h3> <p>在函数中，用 local 声明局部变量，不然都是全局变量。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">local</span> varname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>丰富一下脚本：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Program to output a system information page</span>

<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;System Information Report For <span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%F %T %Z&quot;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">TIME_STAMP</span><span class="token operator">=</span><span class="token string">&quot;Generated <span class="token variable">$CURRENT_TIME</span>, by <span class="token environment constant">$USER</span>&quot;</span>

<span class="token function-name function">report_uptime</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> <span class="token string">EOF
		&lt;H2&gt;System Uptime&lt;/H2&gt;
		&lt;PRE&gt;<span class="token variable"><span class="token variable">$(</span><span class="token function">uptime</span><span class="token variable">)</span></span>&lt;/PRE&gt;
	EOF
	# echo &quot;uptime&quot;
	return
}

report_disk_space () {
	cat &lt;&lt;- EOF
		&lt;H2&gt;Disk Space Utilization&lt;/H2&gt;
		&lt;PRE&gt;<span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> -h<span class="token variable">)</span></span>&lt;/PRE&gt;
		EOF
	# echo &quot;disk_space&quot;
	return
}

report_home_space () {
	cat &lt;&lt;- EOF
		&lt;H2&gt;Home Space Utilization&lt;/H2&gt;
		&lt;PRE&gt;<span class="token variable"><span class="token variable">$(</span><span class="token function">du</span> -sh ~/*<span class="token variable">)</span></span>&lt;/PRE&gt;
		EOF
	# echo &quot;home_space&quot;
	return
}

cat &lt;&lt; EOF
&lt;HTML&gt;
	&lt;HEAD&gt;
		&lt;TITLE&gt;<span class="token variable">$TITLE</span>&lt;/TITLE&gt;
	&lt;/HEAD&gt;
	&lt;BODY&gt;
		&lt;H1&gt;<span class="token variable">$TITLE</span>&lt;/H1&gt;
		&lt;P&gt;<span class="token variable">$TIME_STAMP</span>&lt;/P&gt;
		<span class="token variable"><span class="token variable">$(</span>report_uptime<span class="token variable">)</span></span>
		<span class="token variable"><span class="token variable">$(</span>report_disk_space<span class="token variable">)</span></span>
		<span class="token variable"><span class="token variable">$(</span>report_home_space<span class="token variable">)</span></span>
	&lt;/BODY&gt;
&lt;/HTML&gt;
EOF</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Success!&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="chapter-27-流控制：if-分支语句"><a href="#chapter-27-流控制：if-分支语句" class="header-anchor">#</a> Chapter 27 流控制：IF 分支语句</h3> <p>If 语法格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> commands<span class="token punctuation">;</span> <span class="token keyword">then</span>
	commands
<span class="token punctuation">[</span>elif commands<span class="token punctuation">;</span> <span class="token keyword">then</span>
	commands<span class="token punctuation">]</span>
<span class="token punctuation">[</span>else
	commands<span class="token punctuation">]</span>
<span class="token keyword">fi</span>
<span class="token comment"># 或</span>
<span class="token keyword">if</span> commands<span class="token punctuation">;</span> <span class="token keyword">then</span> commands<span class="token punctuation">;</span> <span class="token punctuation">[</span>elif commands<span class="token punctuation">;</span> <span class="token keyword">then</span> commands<span class="token punctuation">;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>else commands<span class="token punctuation">;</span><span class="token punctuation">]</span> <span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>执行的退出状态</p> <p>0表示执行成功，其他数值表示失败。一个命令结束后通过：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>检测退出状态。</p> <p><strong>test 命令</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">test</span> expression
<span class="token comment"># 或</span>
<span class="token punctuation">[</span> expression <span class="token punctuation">]</span> <span class="token comment">#常用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>test 命令中的所有表达式和操作符都被 shell 看作命令参数，像 &lt; &gt; ( ) 都需要引号括起或者进行转义。</p> <p>文件表达式</p> <table><thead><tr><th style="text-align:center;">表达式</th> <th style="text-align:center;">成为 true 的条件</th></tr></thead> <tbody><tr><td style="text-align:center;">file1 -ef file2</td> <td style="text-align:center;">两个文件硬链接指向同一个文件</td></tr> <tr><td style="text-align:center;">file1 -nt file2</td> <td style="text-align:center;">file1 比 file2 新</td></tr> <tr><td style="text-align:center;">file1 -ot file2</td> <td style="text-align:center;">file1 比 file2 旧</td></tr> <tr><td style="text-align:center;">-e file</td> <td style="text-align:center;">file 存在</td></tr> <tr><td style="text-align:center;">-f file</td> <td style="text-align:center;">file 存在并且是一个普通文件</td></tr> <tr><td style="text-align:center;">-d file</td> <td style="text-align:center;">file 存在并且是一个目录</td></tr> <tr><td style="text-align:center;">-L file</td> <td style="text-align:center;">file 存在并且是一个符号链接</td></tr> <tr><td style="text-align:center;">-r file</td> <td style="text-align:center;">file 存在并且可读</td></tr> <tr><td style="text-align:center;">-w file</td> <td style="text-align:center;">file 存在并且可写</td></tr> <tr><td style="text-align:center;">-x file</td> <td style="text-align:center;">file 存在并且可执行</td></tr></tbody></table> <p>字符串表达式</p> <table><thead><tr><th style="text-align:center;">表达式</th> <th style="text-align:center;">成为 true 的条件</th></tr></thead> <tbody><tr><td style="text-align:center;">string</td> <td style="text-align:center;">string 不为空</td></tr> <tr><td style="text-align:center;">-n string</td> <td style="text-align:center;">string 的长度大于0</td></tr> <tr><td style="text-align:center;">-z string</td> <td style="text-align:center;">string 的长度等于0</td></tr> <tr><td style="text-align:center;">string1 == string2</td> <td style="text-align:center;">判断相等</td></tr> <tr><td style="text-align:center;">string1 != string2</td> <td style="text-align:center;">判断不等</td></tr> <tr><td style="text-align:center;">string1 &gt; string2</td> <td style="text-align:center;">排序时，string1 在 string2 后</td></tr> <tr><td style="text-align:center;">string1 &lt; string2</td> <td style="text-align:center;">排序时，string1 在 string2 前</td></tr></tbody></table> <p>整数表达式</p> <table><thead><tr><th style="text-align:center;">表达式</th> <th style="text-align:center;">成为 true 的条件</th></tr></thead> <tbody><tr><td style="text-align:center;">integer1 -eq integer2</td> <td style="text-align:center;">integer1 和 integer2 相等</td></tr> <tr><td style="text-align:center;">integer1 -ne integer2</td> <td style="text-align:center;">判断不等</td></tr> <tr><td style="text-align:center;">integer1 -le integer2</td> <td style="text-align:center;">小于等于</td></tr> <tr><td style="text-align:center;">integer1 -lt integer2</td> <td style="text-align:center;">小于</td></tr> <tr><td style="text-align:center;">integer1 -ge integer2</td> <td style="text-align:center;">大于等于</td></tr> <tr><td style="text-align:center;">integer1 -gt integer2</td> <td style="text-align:center;">大于</td></tr></tbody></table> <p><strong>[[ ]]</strong> ——更现代的 test 命令</p> <p>=~ 支持扩展正则表达式的匹配</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>string <span class="token operator">=</span>~ regex
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果 string 与扩展的正则表达式 regex 匹配，则返回 true。</p> <p>例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$INT</span> <span class="token operator">=</span>~ ^-?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>== 支持模式匹配，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$FILE</span> <span class="token operator">==</span> foo.* <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>(( ))</strong> ——为整数设计</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token variable"><span class="token punctuation">((</span> <span class="token punctuation">(</span>INT <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">))</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(( )) 内无需扩展操作</p> <p>逻辑操作符</p> <table><thead><tr><th style="text-align:center;">操作</th> <th style="text-align:center;">test 命令</th> <th style="text-align:center;">[[ ]] (( ))</th></tr></thead> <tbody><tr><td style="text-align:center;">AND</td> <td style="text-align:center;">-a</td> <td style="text-align:center;">&amp;&amp;</td></tr> <tr><td style="text-align:center;">OR</td> <td style="text-align:center;">-o</td> <td style="text-align:center;">||</td></tr> <tr><td style="text-align:center;">NOT</td> <td style="text-align:center;">!</td> <td style="text-align:center;">!</td></tr></tbody></table> <p>控制运算符：另一种方式的分支</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>command1 <span class="token operator">&amp;&amp;</span> command2 <span class="token comment">#command1 运行成功才运行 command2</span>
command1 <span class="token operator">||</span> command2 <span class="token comment">#command1 运行失败才运行 command2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="chapter-28-读取键盘输入"><a href="#chapter-28-读取键盘输入" class="header-anchor">#</a> Chapter 28 读取键盘输入</h3> <p>内嵌命令 read 从标准输入读取输入值。语法结构：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">read</span> <span class="token punctuation">[</span>-options<span class="token punctuation">]</span> <span class="token punctuation">[</span>variable<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当不指名变量时，会将所有的输入分配给一个 shell 变量：REPLY</p> <p>read 选项：</p> <table><thead><tr><th style="text-align:center;">Option</th> <th style="text-align:center;">Intro</th></tr></thead> <tbody><tr><td style="text-align:center;">-a array</td> <td style="text-align:center;">将输入值从索引0的位置开始赋给 array</td></tr> <tr><td style="text-align:center;">-d delimiter</td> <td style="text-align:center;">用字符串 delimiter 的第一个字符标志输入的结束，而不是新的一行开始</td></tr> <tr><td style="text-align:center;">- e</td> <td style="text-align:center;">使用 Readline 处理输入，在输入的时候可以使用命令补全功能</td></tr> <tr><td style="text-align:center;">-n num</td> <td style="text-align:center;">从输入中读取 num 个字符，而不是一整行</td></tr> <tr><td style="text-align:center;">-p prompt</td> <td style="text-align:center;">使用 prompt 字符串提示用户进行输入</td></tr> <tr><td style="text-align:center;">-r</td> <td style="text-align:center;">原始模式。屏蔽 \，如果没有该选项，则 \ 作为一个转义字符，有的话 \ 就是个正常的字符了</td></tr> <tr><td style="text-align:center;">-s</td> <td style="text-align:center;">保密模式。不在屏幕上显示输入的字符，例如输入密码</td></tr> <tr><td style="text-align:center;">-t seconds</td> <td style="text-align:center;">定义输入字符的等待时间，超时后，read 命令返回一个非0的退出状态</td></tr> <tr><td style="text-align:center;">-u fd</td> <td style="text-align:center;">从文件描述符 fd 读取输入，而非标准输入</td></tr></tbody></table> <p>例子：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 提示 &amp; REPLY</span>
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;Enter one or more values &gt; &quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;REPLY = '<span class="token environment constant">$REPLY</span>'&quot;</span>
<span class="token comment"># 多变量</span>
<span class="token comment"># 用户输入时以空格隔开</span>
<span class="token comment"># 若 read 命令读取的值少于预期的数目，则多余变量值为空</span>
<span class="token comment"># 若 read 命令读取的值多于预期的数目，则最后的变量包含所有多余值</span>
<span class="token builtin class-name">read</span> var1 var2 var3
<span class="token builtin class-name">echo</span> <span class="token variable">$var1</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$var2</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$var3</span>
<span class="token comment"># -t 超时 -s 保密</span>
<span class="token keyword">if</span> <span class="token builtin class-name">read</span> -t <span class="token number">10</span> -sp <span class="token string">&quot;Enter secret passphrase &gt; &quot;</span> secret_pass<span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>Secret passphrase = '<span class="token variable">$secret_pass</span>'&quot;</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>Input timed out&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
	<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>shell 变量 IFS（Internal Field Separator）是 read 命令的间隔符，默认的包含了空格、制表符、换行符。改变 IFS 可以控制 read 命令输入的间隔方式。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">str</span><span class="token operator">=</span><span class="token string">&quot;x:y:z&quot;</span>
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&quot;:&quot;</span> <span class="token builtin class-name">read</span> var1 var2 var3 <span class="token operator">&lt;&lt;&lt;</span> <span class="token variable">$str</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上一行中代码很有趣，第一部分是赋值语句，第二部分是 read 命令，第三部分是嵌入字符串。</p> <p>shell 允许在命令执行之前对一个到多个变量进行赋值，这些赋值操作会改变接下来执行命令的操作环境，但效果是暂时的，只在命令执行周期内有效。</p> <p>操作符  &lt;&lt;&lt; 象征一条嵌入字符串，使用它的原因是 read 命令不可重定向，因为 | 管道方式是在子 shell 中进行，子 shell 进程结束后，所复制的 shell 环境就被销毁，read 命令的赋值效果就消失了。</p> <h4 id="zsh-中-read-命令用法发生了较多改变"><a href="#zsh-中-read-命令用法发生了较多改变" class="header-anchor">#</a> zsh 中 read 命令用法发生了较多改变</h4> <p>其中 -p 不再代表提示输入，而应用这种方式：</p> <div class="language-zsh line-numbers-mode"><pre class="language-text"><code>resd &quot;?Enter one or more values &gt; &quot;
echo &quot;REPLY = '$REPLY'&quot;
# 或
resd &quot;VAR?Enter one or more values &gt; &quot;
echo &quot;VAR = '$VAR'&quot;
# 或
resd &quot;?Enter one or more values &gt; &quot; X Y Z
echo &quot;X = '$X'&quot;
echo &quot;Y = '$Y'&quot;
echo &quot;Z = '$Z'&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在 ? 后面是提示字符串，? 前面是单变量名，多变量时可在提示字符串后面列出。</p> <p><em><strong>至于其他的改变，用到时，再在这里补充</strong></em></p> <h3 id="chapter-29-流控制：while-和-until-循环"><a href="#chapter-29-流控制：while-和-until-循环" class="header-anchor">#</a> Chapter 29 流控制：WHILE 和 UNTIL 循环</h3> <p>while 命令语法结构：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> commands<span class="token punctuation">;</span> <span class="token keyword">do</span> commands<span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token comment"># 或</span>
<span class="token keyword">while</span> commands<span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
<span class="token keyword">done</span>
<span class="token comment"># 或</span>
<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
	<span class="token punctuation">[</span>break <span class="token operator">|</span> continue<span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>until 语法命令结构与 while 一样，区别就是知道满足条件后再推出，以打印1-5为例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># while</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> -le <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">$count</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
<span class="token comment"># until</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> -gt <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">$count</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>使用循环读取文件。将一份文件重定向到循环中，每次 read 读取一行。可以在 done 语句后添加重定向操作符，循环利用 read 命令读取重定向文件中的字段。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token builtin class-name">read</span> var1 var2 var3<span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">printf</span> <span class="token string">&quot;var1: %s<span class="token entity" title="\t">\t</span>var2: %s<span class="token entity" title="\t">\t</span>var3: %s<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token punctuation">\</span>
		<span class="token variable">$var1</span> <span class="token punctuation">\</span>
		<span class="token variable">$var2</span> <span class="token punctuation">\</span>
		<span class="token variable">$var3</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>将标准输入重定向到循环中也是可以的，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token function">cat</span> file.txt <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Line <span class="token variable">$count</span>:<span class="token variable">$line</span>&quot;</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>不过由于是通过管道在子 shell  中进行循环操作，循环终止时，内部新建的变量和赋值效果都会消失。</p> <h3 id="chapter-30-故障诊断"><a href="#chapter-30-故障诊断" class="header-anchor">#</a> Chapter 30 故障诊断</h3> <p>防御编程，以防目录切换失败造成删除当前文件夹或者主文件夹。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> -d <span class="token variable">$dir_name</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$dir_name</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> *
<span class="token comment"># 或</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -d <span class="token variable">$dir_name</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> <span class="token variable">$dir_name</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token function">rm</span> *
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;cannot cd to '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;no such directory: '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
	<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>bash 提供调试的追踪方法，直接使用 -x 选项或者用 set 命令加 -x选项。</p> <p>在脚本第一行添加 -x 选项即可激活对整个脚本的追踪活动：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash -x</span>
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>激活追踪之后，运行结果中行开端的 + 号是追踪信息的默认特征，是由 shell 变量 PS4 设定的。用户若想修改以提供更多帮助信息，可以做出修改，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PS4</span></span><span class="token operator">=</span><span class="token string">'<span class="token variable">$LINENO</span> + '</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以追踪脚本的行号。</p> <p>若要对脚本的一部分而不是整体进行追踪，可以使用 set 命令加 -x 选项，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">set</span> -x <span class="token comment">#Turn on tracing</span>
<span class="token punctuation">..</span>.
<span class="token builtin class-name">set</span> +x <span class="token comment">#Turn off tracing</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="chapter-31-流控制：case-分支"><a href="#chapter-31-流控制：case-分支" class="header-anchor">#</a> Chapter 31 流控制：case 分支</h3> <p>case 语法结构：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">case</span> word <span class="token keyword">in</span>
	<span class="token punctuation">[</span>pattern<span class="token punctuation">[</span><span class="token operator">|</span>pattern<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span> commands <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">..</span>.
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>case 模式范例：</p> <table><thead><tr><th style="text-align:center;">Pattern</th> <th style="text-align:center;">Intro</th></tr></thead> <tbody><tr><td style="text-align:center;">a)</td> <td style="text-align:center;">若关键字为 a 则吻合</td></tr> <tr><td style="text-align:center;">[[:alpha:]])</td> <td style="text-align:center;">若关键字为单个字母则吻合</td></tr> <tr><td style="text-align:center;">???)</td> <td style="text-align:center;">若关键字为三个字符则吻合</td></tr> <tr><td style="text-align:center;">*.txt)</td> <td style="text-align:center;">若关键字以 .txt 结尾则吻合</td></tr> <tr><td style="text-align:center;">*)</td> <td style="text-align:center;">与任何关键字吻合，通常放在 case 命令的最后</td></tr></tbody></table> <p>case 例子：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">read</span> -p <span class="token string">&quot;enter word &gt; &quot;</span>

<span class="token keyword">case</span> <span class="token environment constant">$REPLY</span> <span class="token keyword">in</span>
	<span class="token punctuation">[</span><span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token builtin class-name">echo</span> <span class="token string">&quot;is a single alphabetic character.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token punctuation">[</span>ABC<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token builtin class-name">echo</span> <span class="token string">&quot;is A,B,C followed by a digit.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
	???<span class="token punctuation">)</span>			<span class="token builtin class-name">echo</span> <span class="token string">&quot;is three characters long.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
	*.txt<span class="token punctuation">)</span>			<span class="token builtin class-name">echo</span> <span class="token string">&quot;is a word ending in '.txt'&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
	*<span class="token punctuation">)</span>				<span class="token builtin class-name">echo</span> <span class="token string">&quot;is something else.&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>多模式的组合，即在  ) 前的多模式间加入 | 。</p> <h3 id="chapter-32-位置参数"><a href="#chapter-32-位置参数" class="header-anchor">#</a> Chapter 32 位置参数</h3> <p>shell 提供了一组名为位置参数的变量，变量分别命名为 0~9，用 $0 ... $9 来访问变量。</p> <p>$0 总是存储命令行显示的第一项数据，所执行程序所在的路径名（绝对路径）。</p> <p>使用参数扩展技术，用户可以获取多于 9 个参数，将数字用大括号括起来，可以标明一个大于 9 的变量，如 ${10}。</p> <p>$# 提供命令行参数的数量。</p> <p>通过 shift 命令结合循环可以处理更多参数。每执行一次 shift 命令，变量 $2 的值就赋给变量 $1，$3 的值就赋给变量 $2，依次类推。变量 $# 的值同时减 1。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$#</span> -gt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Argument <span class="token variable">$count</span> = <span class="token variable">$1</span>&quot;</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>
	<span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>不使用 shift 的例子：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># file_info: simple file information program</span>

<span class="token assign-left variable">PROGRAM</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $0<span class="token variable">)</span></span> <span class="token comment">#basename命令的作用是移除路径的起始部分，只保留文件名</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -e <span class="token variable">$1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>File Type:&quot;</span>
	<span class="token function">file</span> <span class="token variable">$1</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>File Status:&quot;</span>
	<span class="token function">stat</span> <span class="token variable">$1</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$PROGRAM</span>: usage: <span class="token variable">$PROGRAM</span> file&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
	<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>函数中使用位置参数：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function-name function">file_info</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	
	<span class="token comment"># file_info: function to display file information</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -e <span class="token variable">$1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>File Type:&quot;</span>
		<span class="token function">file</span> <span class="token variable">$1</span>
		<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>File Status:&quot;</span>
		<span class="token function">stat</span> <span class="token variable">$1</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FUNCNAME</span>: usage: <span class="token variable">$FUNCNAME</span> file&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> <span class="token comment">#shell自动更新FUNCNAME以追踪当前执行的shell函数</span>
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>$@ 给函数传递参数，将双引号内的参数视为一个参数，例如：<code>program &quot;word&quot; &quot;words with spaces&quot;</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function-name function">print_params</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$1</span> = <span class="token variable">$1</span>&quot;</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$2</span> = <span class="token variable">$2</span>&quot;</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$3</span> = <span class="token variable">$3</span>&quot;</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$4</span> = <span class="token variable">$4</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">pass_params</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token string">'&quot;<span class="token variable">$@</span>&quot; :'</span><span class="token punctuation">;</span> print_params <span class="token string">&quot;S@&quot;</span>
<span class="token punctuation">}</span>

pass_params <span class="token string">&quot;word&quot;</span> <span class="token string">&quot;words with spaces&quot;</span> <span class="token comment">#运行结果为$1为&quot;word&quot;，$2为&quot;word with spaces&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>命令行选项的处理方式举例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function-name function">usage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$PROGRAM</span>: usage: <span class="token variable">$PROGRAM</span> [-f file | -i]&quot;</span>
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token comment"># process command line options</span>

<span class="token assign-left variable">interactive</span><span class="token operator">=</span>
<span class="token assign-left variable">filename</span><span class="token operator">=</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -n <span class="token variable">$1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
		-f <span class="token operator">|</span> --file<span class="token punctuation">)</span>			<span class="token builtin class-name">shift</span>
								<span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token variable">$1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		-i <span class="token operator">|</span> --interactive<span class="token punctuation">)</span>		<span class="token assign-left variable">interactive</span><span class="token operator">=</span><span class="token number">1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		-h <span class="token operator">|</span> --help<span class="token punctuation">)</span>			usage
								<span class="token builtin class-name">exit</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		*<span class="token punctuation">)</span>						usage <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
								<span class="token builtin class-name">exit</span> <span class="token number">1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token keyword">esac</span>
	<span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="chapter-33-流控制：for-循环"><a href="#chapter-33-流控制：for-循环" class="header-anchor">#</a> Chapter 33 流控制：for 循环</h3> <p>for 命令存在两种形式。</p> <p>for 的传统 shell 形式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> variable <span class="token punctuation">[</span>in words<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>for 循环强大在于创建字符列表的方式有多种。例如，花括号扩展：<code>for i in {A..D}</code>，路径名扩展：<code>for i in *.txt</code>，使用命令结果：<code>for i in $(strings $1)</code>。strings 命令对单个或多个文件产生一个可读文本。</p> <p>如果 for 命令中字符选项被忽略，则 for 循环默认处理位置参数。下例功能为在一个或多个文件中搜索最长的字符串：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># longest-word: find longest string in file(s)</span>

<span class="token keyword">for</span> i<span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -r <span class="token variable">$i</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token assign-left variable">max_word</span><span class="token operator">=</span>
		<span class="token assign-left variable">max_len</span><span class="token operator">=</span><span class="token number">0</span>
		<span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span>strings $i<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
			<span class="token assign-left variable">len</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $j <span class="token operator">|</span> <span class="token function">wc</span> -c<span class="token variable">)</span></span> <span class="token comment"># 后续用 len=${#j} 更快</span>
			<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> len <span class="token operator">&gt;</span> max_len <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
				<span class="token assign-left variable">max_len</span><span class="token operator">=</span><span class="token variable">$len</span>
				<span class="token assign-left variable">max_word</span><span class="token operator">=</span><span class="token variable">$j</span>
			<span class="token keyword">fi</span>
		<span class="token keyword">done</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$i</span>: '<span class="token variable">$max_word</span>' (<span class="token variable">$max_len</span> characters)&quot;</span>
	<span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>for 的 C 语言形式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> expression1<span class="token punctuation">;</span> expression2<span class="token punctuation">;</span> expression3 <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最终改进的 sys_info_page 脚本：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># sys_info_page: program to output a system information page</span>

<span class="token assign-left variable">PROGRAM</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $0<span class="token variable">)</span></span>
<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;System Information Report For <span class="token variable">$hostname</span>&quot;</span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%F %T %Z&quot;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">TIME_STAMP</span><span class="token operator">=</span><span class="token string">&quot;Genetated <span class="token variable">$CURRENT_TIME</span>, by <span class="token environment constant">$USER</span>&quot;</span>

<span class="token function-name function">report_uptime</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> EOF
		<span class="token operator">&lt;</span>H<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>System Uptime<span class="token operator">&lt;</span>/H<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
		<span class="token operator">&lt;</span>PRE<span class="token operator">&gt;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uptime</span><span class="token variable">)</span></span><span class="token operator">&lt;</span>/PRE<span class="token operator">&gt;</span>
		EOF
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">report_disk_space</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> EOF
		<span class="token operator">&lt;</span>H<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>Disk Space Utilization<span class="token operator">&lt;</span>/H<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
		<span class="token operator">&lt;</span>PRE<span class="token operator">&gt;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> -h<span class="token variable">)</span></span><span class="token operator">&lt;</span>/PRE<span class="token operator">&gt;</span>
		EOF
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">report_home_space</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	
	<span class="token builtin class-name">local</span> <span class="token assign-left variable">format</span><span class="token operator">=</span><span class="token string">&quot;%8s%10s%10s<span class="token entity" title="\n">\n</span>&quot;</span>
	<span class="token builtin class-name">local</span> i dir_list total_files total_dirs total_size user_name
	
	<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		<span class="token assign-left variable">dir_list</span><span class="token operator">=</span>/home/*
		<span class="token assign-left variable">user_name</span><span class="token operator">=</span><span class="token string">&quot;All Users&quot;</span>
	<span class="token keyword">else</span>
		<span class="token assign-left variable">dir_list</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>
		<span class="token assign-left variable">user_name</span><span class="token operator">=</span><span class="token environment constant">$USER</span>
	<span class="token keyword">fi</span>
	
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;H2&gt;Home Space Utilization (<span class="token variable">$user_name</span>)&lt;/H2&gt;&quot;</span>
	
	<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">$dir_list</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
		
		<span class="token assign-left variable">total_files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">find</span> $i -type f <span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">)</span></span>
		<span class="token assign-left variable">total_dirs</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">find</span> $i -type d <span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">)</span></span>
		<span class="token assign-left variable">total_size</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">du</span> -sh $i <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">1</span><span class="token variable">)</span></span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;H3&gt;<span class="token variable">$i</span>&lt;/H3&gt;&quot;</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;PRE&gt;&quot;</span>
		<span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$format</span>&quot;</span> <span class="token string">&quot;Dirs&quot;</span> <span class="token string">&quot;Files&quot;</span> <span class="token string">&quot;Size&quot;</span>
		<span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$format</span>&quot;</span> <span class="token string">&quot;----&quot;</span> <span class="token string">&quot;-----&quot;</span> <span class="token string">&quot;----&quot;</span>
		<span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$format</span>&quot;</span> <span class="token variable">$total_dirs</span> <span class="token variable">$total_files</span> <span class="token variable">$total_size</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;/PRE&gt;&quot;</span>
	<span class="token keyword">done</span>
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">usage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$PROGRAM</span>: usage: <span class="token variable">$PROGRAM</span> [-f file | -i]&quot;</span>
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token function-name function">write_html_page</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> EOF
	<span class="token operator">&lt;</span>HTML<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>HEAD<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>TITLE<span class="token operator">&gt;</span><span class="token variable">$TITLE</span><span class="token operator">&lt;</span>/TITLE<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>/HEAD<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>BODY<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>H<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token variable">$TITLE</span><span class="token operator">&lt;</span>/H<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
			<span class="token operator">&lt;</span>P<span class="token operator">&gt;</span><span class="token variable">$TIME_STAMP</span><span class="token operator">&lt;</span>/P<span class="token operator">&gt;</span>
			<span class="token variable"><span class="token variable">$(</span>report_uptime<span class="token variable">)</span></span>
			<span class="token variable"><span class="token variable">$(</span>report_disk_space<span class="token variable">)</span></span>
			<span class="token variable"><span class="token variable">$(</span>report_home_space<span class="token variable">)</span></span>
		<span class="token operator">&lt;</span>/BODY<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/HTML<span class="token operator">&gt;</span>
	EOF
	<span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token comment"># process command line options</span>

<span class="token assign-left variable">interactive</span><span class="token operator">=</span>
<span class="token assign-left variable">filename</span><span class="token operator">=</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -n <span class="token variable">$1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
		-f <span class="token operator">|</span> --file<span class="token punctuation">)</span>			<span class="token builtin class-name">shift</span>
								<span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token variable">$1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		-i <span class="token operator">|</span> --interactive<span class="token punctuation">)</span>		<span class="token assign-left variable">interactive</span><span class="token operator">=</span><span class="token number">1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		-h <span class="token operator">|</span> --help<span class="token punctuation">)</span>			usage
								<span class="token builtin class-name">exit</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
		*<span class="token punctuation">)</span>						usage <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
								<span class="token builtin class-name">exit</span> <span class="token number">1</span>
								<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token keyword">esac</span>
	<span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>

<span class="token comment"># interactive mode</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -n <span class="token variable">$interactive</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
		<span class="token builtin class-name">read</span> -p <span class="token string">&quot;Enter name of output file: &quot;</span> filename
		<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -e <span class="token variable">$filename</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
			<span class="token builtin class-name">read</span> -p <span class="token string">&quot;'<span class="token variable">$filename</span>' exists. Overwrite? [y/n/q] &gt; &quot;</span>
			<span class="token keyword">case</span> <span class="token environment constant">$REPLY</span> <span class="token keyword">in</span>
				Y<span class="token operator">|</span>y<span class="token punctuation">)</span>	<span class="token builtin class-name">break</span>
						<span class="token punctuation">;</span><span class="token punctuation">;</span>
				Q<span class="token operator">|</span>q<span class="token punctuation">)</span>	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Program terminated.&quot;</span>
						<span class="token punctuation">;</span><span class="token punctuation">;</span>
				*<span class="token punctuation">)</span>		<span class="token builtin class-name">continue</span>
						<span class="token punctuation">;</span><span class="token punctuation">;</span>
			<span class="token keyword">esac</span>
		<span class="token keyword">fi</span>
	<span class="token keyword">done</span>
<span class="token keyword">fi</span>

<span class="token comment"># output html page</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -n <span class="token variable">$filename</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token keyword">if</span> <span class="token function">touch</span> <span class="token variable">$filename</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -f <span class="token variable">$filename</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
		write_html_page <span class="token operator">&gt;</span> <span class="token variable">$filename</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$PROGRAM</span>: Cannot write file 'filename'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
		<span class="token builtin class-name">exit</span> <span class="token number">1</span>
	<span class="token keyword">fi</span>
<span class="token keyword">else</span>
	write_html_page
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br></div></div><h3 id="chapter-34-字符串和数字"><a href="#chapter-34-字符串和数字" class="header-anchor">#</a> Chapter 34 字符串和数字</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 参数扩展</span>
<span class="token comment">## 基本参数</span>
<span class="token variable">$var</span>
<span class="token variable">${var}</span> <span class="token comment"># 在变量紧挨着文本时用，以免 shell 混淆 比如 echo &quot;${a}_file&quot; ${11}</span>
<span class="token comment">## 空变量扩展</span>
<span class="token variable">${val<span class="token operator">:-</span>string}</span> <span class="token comment"># val 为空或不存在时，扩展为 string 的值，非空的话则就是 val 的值</span>
<span class="token variable">${val<span class="token operator">:=</span>string}</span> <span class="token comment"># val 为空或不存在时，扩展为 string 的值，此外 string 的值也赋给 val，非空的话则就是 val 的值</span>
<span class="token variable">${val<span class="token operator">:?</span>string}</span> <span class="token comment"># val 为空或不存在时，扩展致使脚本出错而退出，并且将 string 内容输出到标准错误</span>
<span class="token variable">${val<span class="token operator">:+</span>string}</span> <span class="token comment"># val 为空或不存在时，不进行任何扩展，非空的话，输出string 的值，val 的值不变化</span>
<span class="token comment">## 字符串操作</span>
<span class="token variable">${<span class="token operator">#</span>val}</span> <span class="token comment"># 返回 val 包含字符串的长度</span>
<span class="token variable">${val<span class="token operator">:</span>start}</span> <span class="token comment"># 返回从 val start 位置开始到结尾的字符串，如果 start 为负值，表示从字符串末尾开始计算，负号前要有空格</span>
<span class="token variable">${val<span class="token operator">:</span>start<span class="token operator">:</span>length}</span> <span class="token comment"># 返回从 val start 位置开始长为 length 的字符串</span>

<span class="token comment"># 算术计算和扩展</span>
<span class="token variable"><span class="token variable">$((</span>expression<span class="token variable">))</span></span>
<span class="token comment">## 数字进制</span>
<span class="token variable"><span class="token variable">$((</span><span class="token operator">&lt;</span>num<span class="token operator">&gt;</span><span class="token variable">))</span></span> <span class="token comment"># 默认十进制</span>
<span class="token variable"><span class="token variable">$((</span><span class="token number">0</span><span class="token operator">&lt;</span>num<span class="token operator">&gt;</span><span class="token variable">))</span></span> <span class="token comment"># 八进制</span>
<span class="token variable"><span class="token variable">$((</span><span class="token number">0</span>x<span class="token operator">&lt;</span>num<span class="token operator">&gt;</span><span class="token variable">))</span></span> <span class="token comment"># 十六进制 0xff</span>
<span class="token variable"><span class="token variable">$((</span><span class="token operator">&lt;</span>base<span class="token operator">&gt;</span>#<span class="token operator">&lt;</span>num<span class="token operator">&gt;</span><span class="token variable">))</span></span> <span class="token comment"># base进制 2#1010</span>
<span class="token comment">## 运算符</span>
** <span class="token comment"># 求幂</span>
<span class="token operator">+=</span> -<span class="token operator">=</span> *<span class="token operator">=</span> /<span class="token operator">=</span> %<span class="token operator">=</span> ++ --
<span class="token comment">## 位运算</span>
~ <span class="token comment"># 每一位取反</span>
<span class="token operator">&lt;&lt;</span> <span class="token operator">&gt;&gt;</span>
<span class="token operator">&amp;</span> <span class="token operator">|</span> ^<span class="token comment"># 与 或 异或</span>
<span class="token comment">## 逻辑运算 (())</span>
expr1 ? expr2 <span class="token builtin class-name">:</span> expr3 <span class="token comment"># 赋值操作的表达式需要()括起来</span>

<span class="token comment"># 任意精度计算语言 bc</span>
<span class="token function">bc</span> file.bc
<span class="token function">bc</span>
<span class="token function">bc</span> -q <span class="token comment"># 没有提示信息</span>
<span class="token function">bc</span> <span class="token operator">&lt;</span> file.bc <span class="token comment"># 标准输入传递脚本</span>
<span class="token function">bc</span> <span class="token operator">&lt;&lt;&lt;</span> <span class="token string">&quot;2+2&quot;</span> <span class="token comment"># 嵌入字符串，也支持管道传入</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>bc 脚本例子</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#！/bin/bash</span>

<span class="token comment"># loan-calc : script to calculate monthly loan payments</span>

<span class="token assign-left variable">PROGRAM</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $0<span class="token variable">)</span></span>

<span class="token keyword">if</span><span class="token variable"><span class="token punctuation">((</span>$# <span class="token operator">!=</span> <span class="token number">3</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	usage
	<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">principal</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">interest</span><span class="token operator">=</span><span class="token variable">$2</span>
<span class="token assign-left variable">months</span><span class="token operator">=</span><span class="token variable">$3</span>

<span class="token function">bc</span> <span class="token operator">&lt;&lt;-</span> <span class="token string">EOF
	scale = 10
	i = <span class="token variable">$interest</span> / 12
	p = <span class="token variable">$principal</span>
	n = $ months
	a = p * <span class="token variable"><span class="token punctuation">((</span>i <span class="token operator">*</span> <span class="token punctuation">((</span><span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">^</span> n<span class="token punctuation">))</span></span> / <span class="token variable"><span class="token punctuation">((</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">^</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">))</span></span>
	print a, &quot;<span class="token entity" title="\n">\n</span>&quot;
EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="chapter-35-数组"><a href="#chapter-35-数组" class="header-anchor">#</a> Chapter 35 数组</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建数组</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>x <span class="token comment"># 访问时自动创建</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${a<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span>
<span class="token builtin class-name">declare</span> -a a <span class="token comment"># 通过 declare 创建</span>
<span class="token comment"># 数组赋值</span>
name<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">=</span>val
<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">(</span>val1 val2<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token assign-left variable">days</span><span class="token operator">=</span><span class="token punctuation">(</span>Sun Mon Tus Wed Thu Fri Sat<span class="token punctuation">)</span>
<span class="token comment"># 数组操作</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${animal<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${animal<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
<span class="token comment">## 确定数组元素数目</span>
a<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span>foo
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>a<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token comment"># 1，mac上100？</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>a<span class="token punctuation">[</span>100<span class="token punctuation">]</span>}</span> <span class="token comment"># 3</span>
<span class="token comment">## 增加元素</span>
<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token punctuation">{</span>a b c<span class="token punctuation">}</span>
<span class="token assign-left variable">foo</span><span class="token operator">+=</span><span class="token punctuation">(</span>d e f<span class="token punctuation">)</span>
<span class="token comment">## 数组排序</span>
<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token punctuation">(</span>f e d c b a<span class="token punctuation">)</span>
<span class="token assign-left variable">a_sorted</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${a<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> $i<span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">sort</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Sorted array: <span class="token variable">${a_sorted<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token comment">## 数组删除</span>
<span class="token builtin class-name">unset</span> foo
<span class="token builtin class-name">unset</span> <span class="token string">'foo[2]'</span> <span class="token comment"># 必须引用来阻止 shell 路径名扩展</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="chapter-36-其他命令"><a href="#chapter-36-其他命令" class="header-anchor">#</a> Chapter 36 其他命令</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 组命令、子shell方便将结果合并重定向或管道</span>
<span class="token punctuation">{</span> command1<span class="token punctuation">;</span> command2<span class="token punctuation">;</span> <span class="token punctuation">[</span>command3<span class="token punctuation">;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token comment"># 组命令 花括号与命令空格分开</span>
<span class="token punctuation">(</span>command1<span class="token punctuation">;</span> command2<span class="token punctuation">;</span> <span class="token punctuation">[</span>command3<span class="token punctuation">;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 子shell</span>

<span class="token operator">&lt;</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token comment"># 产生标准输出</span>
<span class="token operator">&gt;</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token comment"># 吸纳标准输入</span>

<span class="token builtin class-name">read</span> <span class="token operator">&lt;</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$REPLY</span>
<span class="token builtin class-name">echo</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span> <span class="token comment"># /dev/f/15 将子shell的输出当作普通文件</span>

<span class="token comment"># 响应信号</span>
<span class="token builtin class-name">trap</span>
<span class="token comment"># 异步执行</span>
<span class="token function">wait</span>
<span class="token comment"># 命名管道</span>
<span class="token function">mkfifo</span> pipename
process1 <span class="token operator">&gt;</span> pipname
process2 <span class="token operator">&lt;</span> pipname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="complement"><a href="#complement" class="header-anchor">#</a> Complement</h2> <p>自动补全及忽略大小写</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~<span class="token punctuation">;</span> <span class="token function">nano</span> .inputrc
<span class="token comment"># 自动补全</span>
<span class="token builtin class-name">set</span> show-all-if-ambiguous on
TAB: menu-complete
<span class="token comment"># 忽略大小写</span>
<span class="token builtin class-name">set</span> completion-ignore-case on
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/16/2020, 8:42:17 PM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/assets/js/app.8f1aa5f8.js" defer></script><script src="/assets/js/4.20fd5242.js" defer></script><script src="/assets/js/1.d8e0899a.js" defer></script><script src="/assets/js/35.ec5cfdd7.js" defer></script>
  </body>
</html>
